# Chapter 54: ìŠ¤ì¼ˆë ˆí†¤ê³¼ í”Œë ˆì´ìŠ¤í™€ë”

ì»¨í…ì¸ ê°€ ë¡œë”©ë˜ëŠ” ë™ì•ˆ ë¹ˆ í™”ë©´ ëŒ€ì‹  ìŠ¤ì¼ˆë ˆí†¤ UIë¥¼ ë³´ì—¬ì£¼ë©´ ì‚¬ìš©ìëŠ” ë¬´ì—‡ì´ ë¡œë”©ë˜ê³  ìˆëŠ”ì§€ ì˜ˆì¸¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì¥ì—ì„œëŠ” ë‹¤ì–‘í•œ ë ˆì´ì•„ì›ƒì˜ ìŠ¤ì¼ˆë ˆí†¤ê³¼ ì´ë¯¸ì§€ í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.

## ğŸ“Œ í•™ìŠµ ëª©í‘œ

- ë³µì¡í•œ ë ˆì´ì•„ì›ƒ ìŠ¤ì¼ˆë ˆí†¤ êµ¬í˜„
- ì´ë¯¸ì§€ í”Œë ˆì´ìŠ¤í™€ë”ì™€ ë¸”ëŸ¬ ì „í™˜
- Shimmer íš¨ê³¼ ìµœì í™”
- ìŠ¤ì¼ˆë ˆí†¤ â†’ ì»¨í…ì¸  ì „í™˜ ì• ë‹ˆë©”ì´ì…˜
- ì ì§„ì  ë¡œë”© íŒ¨í„´
- ìŠ¤ì¼ˆë ˆí†¤ ì»´í¬ë„ŒíŠ¸ ì‹œìŠ¤í…œ

## ğŸ“– ìŠ¤ì¼ˆë ˆí†¤ ë””ìì¸ ì‹œìŠ¤í…œ

```
ìŠ¤ì¼ˆë ˆí†¤ ì»´í¬ë„ŒíŠ¸ ê³„ì¸µ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ê¸°ë³¸ ë‹¨ìœ„ (Primitives)
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ SkeletonBox     â–“â–“â–“â–“â–“â–“â–“â–“                   â”‚
â”‚ SkeletonCircle  (â—)                         â”‚
â”‚ SkeletonText    â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
              â–¼
ë³µí•© ë‹¨ìœ„ (Compounds)
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ SkeletonCard                               â”‚
â”‚ â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚
â”‚ â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ â”‚ â”‚
â”‚ â”‚ (â—) â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“                       â”‚ â”‚
â”‚ â”‚     â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“                 â”‚ â”‚
â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
              â–¼
í˜ì´ì§€ ë‹¨ìœ„ (Pages)
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ SkeletonFeed, SkeletonProfile, etc.        â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Shimmer íš¨ê³¼:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“
      â•²
       â•² ë¹› ë°˜ì‚¬ íš¨ê³¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶
        â•²
â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“

ì™¼ìª½ â†’ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™í•˜ëŠ” ê·¸ë¼ë””ì–¸íŠ¸
```

## ğŸ’» ìŠ¤ì¼ˆë ˆí†¤ ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸

### í†µí•© Shimmer í”„ë¡œë°”ì´ë”

```typescript
import React, { createContext, useContext } from 'react';
import { StyleSheet, View, ViewStyle } from 'react-native';
import Animated, {
  useSharedValue,
  useAnimatedStyle,
  withRepeat,
  withTiming,
  interpolate,
  Easing,
} from 'react-native-reanimated';
import { LinearGradient } from 'expo-linear-gradient';
import MaskedView from '@react-native-masked-view/masked-view';

// Shimmer ì§„í–‰ë„ë¥¼ ê³µìœ í•˜ëŠ” ì»¨í…ìŠ¤íŠ¸
const ShimmerContext = createContext<Animated.SharedValue<number> | null>(null);

export function ShimmerProvider({ children }: { children: React.ReactNode }) {
  const shimmerProgress = useSharedValue(0);

  React.useEffect(() => {
    shimmerProgress.value = withRepeat(
      withTiming(1, {
        duration: 1500,
        easing: Easing.inOut(Easing.ease),
      }),
      -1,
      false
    );
  }, []);

  return (
    <ShimmerContext.Provider value={shimmerProgress}>
      {children}
    </ShimmerContext.Provider>
  );
}

export function useShimmerProgress() {
  const context = useContext(ShimmerContext);
  if (!context) {
    throw new Error('useShimmerProgress must be used within ShimmerProvider');
  }
  return context;
}
```

### ê¸°ë³¸ ìŠ¤ì¼ˆë ˆí†¤ ì»´í¬ë„ŒíŠ¸

```typescript
import React from 'react';
import { StyleSheet, View, ViewStyle } from 'react-native';
import Animated, {
  useAnimatedStyle,
  interpolate,
} from 'react-native-reanimated';
import { LinearGradient } from 'expo-linear-gradient';

interface SkeletonProps {
  width: number | string;
  height: number;
  borderRadius?: number;
  style?: ViewStyle;
}

export function Skeleton({
  width,
  height,
  borderRadius = 4,
  style,
}: SkeletonProps) {
  const shimmerProgress = useShimmerProgress();

  const shimmerStyle = useAnimatedStyle(() => {
    const translateX = interpolate(
      shimmerProgress.value,
      [0, 1],
      [-200, 200]
    );

    return {
      transform: [{ translateX }],
    };
  });

  return (
    <View
      style={[
        {
          width,
          height,
          borderRadius,
          backgroundColor: '#E8E8E8',
          overflow: 'hidden',
        },
        style,
      ]}
    >
      <Animated.View style={[StyleSheet.absoluteFill, shimmerStyle]}>
        <LinearGradient
          colors={['transparent', 'rgba(255,255,255,0.6)', 'transparent']}
          start={{ x: 0, y: 0 }}
          end={{ x: 1, y: 0 }}
          style={StyleSheet.absoluteFill}
        />
      </Animated.View>
    </View>
  );
}

// ì›í˜• ìŠ¤ì¼ˆë ˆí†¤
export function SkeletonCircle({
  size,
  style,
}: {
  size: number;
  style?: ViewStyle;
}) {
  return (
    <Skeleton
      width={size}
      height={size}
      borderRadius={size / 2}
      style={style}
    />
  );
}

// í…ìŠ¤íŠ¸ ìŠ¤ì¼ˆë ˆí†¤
export function SkeletonText({
  lines = 1,
  lineHeight = 16,
  spacing = 8,
  lastLineWidth = '60%',
}: {
  lines?: number;
  lineHeight?: number;
  spacing?: number;
  lastLineWidth?: string | number;
}) {
  return (
    <View style={{ gap: spacing }}>
      {Array.from({ length: lines }).map((_, index) => (
        <Skeleton
          key={index}
          width={index === lines - 1 ? lastLineWidth : '100%'}
          height={lineHeight}
        />
      ))}
    </View>
  );
}
```

### ë³µí•© ìŠ¤ì¼ˆë ˆí†¤ ì»´í¬ë„ŒíŠ¸

```typescript
// ì¹´ë“œ ìŠ¤ì¼ˆë ˆí†¤
export function SkeletonCard({
  showImage = true,
  imageHeight = 180,
}: {
  showImage?: boolean;
  imageHeight?: number;
}) {
  return (
    <View style={cardStyles.container}>
      {showImage && (
        <Skeleton
          width="100%"
          height={imageHeight}
          borderRadius={0}
        />
      )}
      <View style={cardStyles.content}>
        <Skeleton width="70%" height={20} />
        <View style={{ height: 12 }} />
        <SkeletonText lines={2} lineHeight={14} />
        <View style={{ height: 16 }} />
        <View style={cardStyles.footer}>
          <SkeletonCircle size={32} />
          <View style={{ flex: 1, marginLeft: 12 }}>
            <Skeleton width={100} height={12} />
          </View>
          <Skeleton width={60} height={28} borderRadius={14} />
        </View>
      </View>
    </View>
  );
}

// ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ ìŠ¤ì¼ˆë ˆí†¤
export function SkeletonListItem({
  avatarSize = 48,
  showDescription = true,
}: {
  avatarSize?: number;
  showDescription?: boolean;
}) {
  return (
    <View style={listStyles.container}>
      <SkeletonCircle size={avatarSize} />
      <View style={listStyles.content}>
        <Skeleton width="50%" height={16} />
        {showDescription && (
          <>
            <View style={{ height: 8 }} />
            <Skeleton width="80%" height={14} />
          </>
        )}
      </View>
      <Skeleton width={60} height={12} />
    </View>
  );
}

// í”„ë¡œí•„ í—¤ë” ìŠ¤ì¼ˆë ˆí†¤
export function SkeletonProfileHeader() {
  return (
    <View style={profileStyles.container}>
      <SkeletonCircle size={100} />
      <View style={{ height: 16 }} />
      <Skeleton width={150} height={24} />
      <View style={{ height: 8 }} />
      <Skeleton width={200} height={16} />
      <View style={{ height: 20 }} />
      <View style={profileStyles.stats}>
        {[1, 2, 3].map((i) => (
          <View key={i} style={profileStyles.stat}>
            <Skeleton width={40} height={20} />
            <View style={{ height: 4 }} />
            <Skeleton width={60} height={12} />
          </View>
        ))}
      </View>
    </View>
  );
}

const cardStyles = StyleSheet.create({
  container: {
    backgroundColor: 'white',
    borderRadius: 12,
    overflow: 'hidden',
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.1,
    shadowRadius: 8,
    elevation: 3,
  },
  content: {
    padding: 16,
  },
  footer: {
    flexDirection: 'row',
    alignItems: 'center',
  },
});

const listStyles = StyleSheet.create({
  container: {
    flexDirection: 'row',
    alignItems: 'center',
    padding: 16,
    backgroundColor: 'white',
  },
  content: {
    flex: 1,
    marginLeft: 12,
  },
});

const profileStyles = StyleSheet.create({
  container: {
    alignItems: 'center',
    padding: 24,
  },
  stats: {
    flexDirection: 'row',
    gap: 32,
  },
  stat: {
    alignItems: 'center',
  },
});
```

## ğŸ’» ì´ë¯¸ì§€ í”Œë ˆì´ìŠ¤í™€ë”

### ë¸”ëŸ¬ í•´ì‹œ í”Œë ˆì´ìŠ¤í™€ë”

```typescript
import React, { useState } from 'react';
import { StyleSheet, View, Image, ImageStyle } from 'react-native';
import Animated, {
  useSharedValue,
  useAnimatedStyle,
  withTiming,
  Easing,
} from 'react-native-reanimated';
import { Blurhash } from 'react-native-blurhash';

interface BlurImageProps {
  source: { uri: string };
  blurhash?: string;
  style?: ImageStyle;
  resizeMode?: 'cover' | 'contain' | 'stretch';
}

export function BlurImage({
  source,
  blurhash = 'LEHV6nWB2yk8pyo0adR*.7kCMdnj',
  style,
  resizeMode = 'cover',
}: BlurImageProps) {
  const [loaded, setLoaded] = useState(false);
  const opacity = useSharedValue(0);

  const handleLoad = () => {
    setLoaded(true);
    opacity.value = withTiming(1, {
      duration: 400,
      easing: Easing.out(Easing.ease),
    });
  };

  const imageStyle = useAnimatedStyle(() => ({
    opacity: opacity.value,
  }));

  const placeholderStyle = useAnimatedStyle(() => ({
    opacity: 1 - opacity.value,
  }));

  return (
    <View style={[blurStyles.container, style]}>
      {/* Blurhash í”Œë ˆì´ìŠ¤í™€ë” */}
      <Animated.View style={[StyleSheet.absoluteFill, placeholderStyle]}>
        <Blurhash
          blurhash={blurhash}
          style={StyleSheet.absoluteFill}
          resizeMode="cover"
        />
      </Animated.View>

      {/* ì‹¤ì œ ì´ë¯¸ì§€ */}
      <Animated.Image
        source={source}
        style={[StyleSheet.absoluteFill, imageStyle]}
        resizeMode={resizeMode}
        onLoad={handleLoad}
      />
    </View>
  );
}

const blurStyles = StyleSheet.create({
  container: {
    overflow: 'hidden',
    backgroundColor: '#E8E8E8',
  },
});
```

### ì ì§„ì  ì´ë¯¸ì§€ ë¡œë”©

```typescript
import Animated, {
  useSharedValue,
  useAnimatedStyle,
  withTiming,
  withSequence,
  interpolate,
} from 'react-native-reanimated';

interface ProgressiveImageProps {
  source: { uri: string };
  thumbnailSource?: { uri: string };
  style?: ImageStyle;
}

export function ProgressiveImage({
  source,
  thumbnailSource,
  style,
}: ProgressiveImageProps) {
  const [thumbnailLoaded, setThumbnailLoaded] = useState(false);
  const [fullLoaded, setFullLoaded] = useState(false);

  const progress = useSharedValue(0);
  const blur = useSharedValue(20);

  React.useEffect(() => {
    if (thumbnailLoaded) {
      progress.value = withTiming(0.5, { duration: 200 });
    }
  }, [thumbnailLoaded]);

  React.useEffect(() => {
    if (fullLoaded) {
      progress.value = withTiming(1, { duration: 300 });
      blur.value = withTiming(0, { duration: 300 });
    }
  }, [fullLoaded]);

  const thumbnailStyle = useAnimatedStyle(() => ({
    opacity: interpolate(progress.value, [0, 0.5, 1], [0, 1, 0]),
  }));

  const fullStyle = useAnimatedStyle(() => ({
    opacity: interpolate(progress.value, [0.5, 1], [0, 1]),
  }));

  return (
    <View style={[progressiveStyles.container, style]}>
      {/* ìŠ¤ì¼ˆë ˆí†¤ */}
      {!thumbnailLoaded && (
        <Skeleton
          width="100%"
          height="100%"
          borderRadius={0}
          style={StyleSheet.absoluteFill}
        />
      )}

      {/* ì¸ë„¤ì¼ (ë¸”ëŸ¬) */}
      {thumbnailSource && (
        <Animated.Image
          source={thumbnailSource}
          style={[StyleSheet.absoluteFill, thumbnailStyle]}
          resizeMode="cover"
          onLoad={() => setThumbnailLoaded(true)}
          blurRadius={10}
        />
      )}

      {/* í’€ ì´ë¯¸ì§€ */}
      <Animated.Image
        source={source}
        style={[StyleSheet.absoluteFill, fullStyle]}
        resizeMode="cover"
        onLoad={() => setFullLoaded(true)}
      />
    </View>
  );
}

const progressiveStyles = StyleSheet.create({
  container: {
    overflow: 'hidden',
    backgroundColor: '#E8E8E8',
  },
});
```

## ğŸ’» ìŠ¤ì¼ˆë ˆí†¤ â†’ ì»¨í…ì¸  ì „í™˜

### í˜ì´ë“œ ì „í™˜

```typescript
import Animated, {
  FadeIn,
  FadeOut,
  Layout,
} from 'react-native-reanimated';

interface ContentLoaderProps<T> {
  loading: boolean;
  data: T | null;
  skeleton: React.ReactNode;
  children: (data: T) => React.ReactNode;
  fadeDuration?: number;
}

export function ContentLoader<T>({
  loading,
  data,
  skeleton,
  children,
  fadeDuration = 300,
}: ContentLoaderProps<T>) {
  if (loading || !data) {
    return (
      <Animated.View
        key="skeleton"
        exiting={FadeOut.duration(fadeDuration)}
      >
        {skeleton}
      </Animated.View>
    );
  }

  return (
    <Animated.View
      key="content"
      entering={FadeIn.duration(fadeDuration).delay(100)}
      layout={Layout.springify()}
    >
      {children(data)}
    </Animated.View>
  );
}

// ì‚¬ìš© ì˜ˆì‹œ
function UserProfile() {
  const { data, isLoading } = useUser();

  return (
    <ContentLoader
      loading={isLoading}
      data={data}
      skeleton={<SkeletonProfileHeader />}
    >
      {(user) => (
        <ProfileHeader user={user} />
      )}
    </ContentLoader>
  );
}
```

### ìˆœì°¨ì  ì „í™˜ (Stagger)

```typescript
import Animated, {
  useSharedValue,
  useAnimatedStyle,
  withDelay,
  withTiming,
  withSpring,
} from 'react-native-reanimated';

interface StaggeredLoaderProps<T> {
  loading: boolean;
  items: T[];
  skeleton: React.ReactNode;
  renderItem: (item: T, index: number) => React.ReactNode;
  staggerDelay?: number;
}

export function StaggeredLoader<T>({
  loading,
  items,
  skeleton,
  renderItem,
  staggerDelay = 50,
}: StaggeredLoaderProps<T>) {
  if (loading) {
    return <>{skeleton}</>;
  }

  return (
    <>
      {items.map((item, index) => (
        <StaggeredItem key={index} index={index} delay={staggerDelay}>
          {renderItem(item, index)}
        </StaggeredItem>
      ))}
    </>
  );
}

function StaggeredItem({
  children,
  index,
  delay,
}: {
  children: React.ReactNode;
  index: number;
  delay: number;
}) {
  const opacity = useSharedValue(0);
  const translateY = useSharedValue(20);

  React.useEffect(() => {
    opacity.value = withDelay(
      index * delay,
      withTiming(1, { duration: 300 })
    );
    translateY.value = withDelay(
      index * delay,
      withSpring(0, { damping: 15 })
    );
  }, []);

  const animatedStyle = useAnimatedStyle(() => ({
    opacity: opacity.value,
    transform: [{ translateY: translateY.value }],
  }));

  return (
    <Animated.View style={animatedStyle}>
      {children}
    </Animated.View>
  );
}
```

### ìŠ¤ì¼€ì¼ ì „í™˜

```typescript
import Animated, {
  useSharedValue,
  useAnimatedStyle,
  withSpring,
  withTiming,
} from 'react-native-reanimated';

interface ScaleLoaderProps {
  loading: boolean;
  skeleton: React.ReactNode;
  children: React.ReactNode;
}

export function ScaleLoader({
  loading,
  skeleton,
  children,
}: ScaleLoaderProps) {
  const scale = useSharedValue(loading ? 1 : 0.95);
  const opacity = useSharedValue(loading ? 0 : 1);
  const skeletonOpacity = useSharedValue(loading ? 1 : 0);

  React.useEffect(() => {
    if (!loading) {
      skeletonOpacity.value = withTiming(0, { duration: 200 });

      setTimeout(() => {
        scale.value = withSpring(1, { damping: 12, stiffness: 150 });
        opacity.value = withTiming(1, { duration: 300 });
      }, 200);
    }
  }, [loading]);

  const contentStyle = useAnimatedStyle(() => ({
    transform: [{ scale: scale.value }],
    opacity: opacity.value,
  }));

  const skeletonStyle = useAnimatedStyle(() => ({
    opacity: skeletonOpacity.value,
    position: skeletonOpacity.value === 0 ? 'absolute' : 'relative',
  }));

  return (
    <View>
      {loading && (
        <Animated.View style={skeletonStyle}>
          {skeleton}
        </Animated.View>
      )}

      <Animated.View style={[contentStyle, !loading && { display: 'flex' }]}>
        {!loading && children}
      </Animated.View>
    </View>
  );
}
```

## ğŸ’» í˜ì´ì§€ ë ˆë²¨ ìŠ¤ì¼ˆë ˆí†¤

### í”¼ë“œ ìŠ¤ì¼ˆë ˆí†¤

```typescript
export function SkeletonFeed({
  itemCount = 3,
}: {
  itemCount?: number;
}) {
  return (
    <ShimmerProvider>
      <View style={feedStyles.container}>
        {Array.from({ length: itemCount }).map((_, index) => (
          <SkeletonCard key={index} />
        ))}
      </View>
    </ShimmerProvider>
  );
}

const feedStyles = StyleSheet.create({
  container: {
    padding: 16,
    gap: 16,
  },
});
```

### í”„ë¡œí•„ í˜ì´ì§€ ìŠ¤ì¼ˆë ˆí†¤

```typescript
export function SkeletonProfilePage() {
  return (
    <ShimmerProvider>
      <View style={profilePageStyles.container}>
        {/* í—¤ë” */}
        <SkeletonProfileHeader />

        {/* íƒ­ ë°” */}
        <View style={profilePageStyles.tabs}>
          {[1, 2, 3].map((i) => (
            <Skeleton key={i} width={80} height={32} borderRadius={16} />
          ))}
        </View>

        {/* ê·¸ë¦¬ë“œ */}
        <View style={profilePageStyles.grid}>
          {Array.from({ length: 9 }).map((_, index) => (
            <Skeleton
              key={index}
              width="31%"
              height={120}
              borderRadius={8}
            />
          ))}
        </View>
      </View>
    </ShimmerProvider>
  );
}

const profilePageStyles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: 'white',
  },
  tabs: {
    flexDirection: 'row',
    justifyContent: 'center',
    gap: 16,
    paddingVertical: 16,
    borderBottomWidth: 1,
    borderBottomColor: '#F0F0F0',
  },
  grid: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    padding: 8,
    gap: 8,
    justifyContent: 'space-between',
  },
});
```

### ì±„íŒ… ëª©ë¡ ìŠ¤ì¼ˆë ˆí†¤

```typescript
export function SkeletonChatList({
  itemCount = 8,
}: {
  itemCount?: number;
}) {
  return (
    <ShimmerProvider>
      <View style={chatListStyles.container}>
        {Array.from({ length: itemCount }).map((_, index) => (
          <View key={index} style={chatListStyles.item}>
            <SkeletonCircle size={56} />
            <View style={chatListStyles.content}>
              <View style={chatListStyles.header}>
                <Skeleton width={100} height={16} />
                <Skeleton width={40} height={12} />
              </View>
              <View style={{ height: 8 }} />
              <Skeleton width="80%" height={14} />
            </View>
          </View>
        ))}
      </View>
    </ShimmerProvider>
  );
}

const chatListStyles = StyleSheet.create({
  container: {
    backgroundColor: 'white',
  },
  item: {
    flexDirection: 'row',
    alignItems: 'center',
    padding: 16,
    borderBottomWidth: 1,
    borderBottomColor: '#F8F8F8',
  },
  content: {
    flex: 1,
    marginLeft: 12,
  },
  header: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
  },
});
```

## ğŸ“± sometimes-app ì ìš© ì‚¬ë¡€

### ë§¤ì¹­ ì¹´ë“œ ìŠ¤ì¼ˆë ˆí†¤

```typescript
// src/features/matching/ui/MatchingCardSkeleton.tsx
import React from 'react';
import { StyleSheet, View, Dimensions } from 'react-native';
import Animated, {
  useSharedValue,
  useAnimatedStyle,
  withRepeat,
  withSequence,
  withTiming,
  Easing,
} from 'react-native-reanimated';

const { width } = Dimensions.get('window');
const CARD_WIDTH = width - 32;
const CARD_HEIGHT = CARD_WIDTH * 1.4;

export function MatchingCardSkeleton() {
  return (
    <ShimmerProvider>
      <View style={matchCardStyles.container}>
        {/* ë©”ì¸ ì´ë¯¸ì§€ ì˜ì—­ */}
        <Skeleton
          width={CARD_WIDTH}
          height={CARD_HEIGHT}
          borderRadius={24}
          style={matchCardStyles.mainImage}
        />

        {/* ì •ë³´ ì˜¤ë²„ë ˆì´ */}
        <View style={matchCardStyles.overlay}>
          {/* ì´ë¦„, ë‚˜ì´ */}
          <Skeleton width={150} height={28} borderRadius={4} />
          <View style={{ height: 8 }} />

          {/* í•™êµ ì •ë³´ */}
          <View style={matchCardStyles.infoRow}>
            <Skeleton width={24} height={24} borderRadius={12} />
            <View style={{ width: 8 }} />
            <Skeleton width={100} height={16} />
          </View>

          {/* ê±°ë¦¬ ì •ë³´ */}
          <View style={matchCardStyles.infoRow}>
            <Skeleton width={24} height={24} borderRadius={12} />
            <View style={{ width: 8 }} />
            <Skeleton width={60} height={16} />
          </View>
        </View>

        {/* ì•¡ì…˜ ë²„íŠ¼ */}
        <View style={matchCardStyles.actions}>
          <SkeletonCircle size={60} />
          <SkeletonCircle size={72} />
          <SkeletonCircle size={60} />
        </View>
      </View>
    </ShimmerProvider>
  );
}

// í„ìŠ¤ íš¨ê³¼ ì¶”ê°€ëœ ë¡œë”© ì¹´ë“œ
export function MatchingLoadingCard() {
  const pulse = useSharedValue(1);

  React.useEffect(() => {
    pulse.value = withRepeat(
      withSequence(
        withTiming(0.95, { duration: 1000, easing: Easing.ease }),
        withTiming(1, { duration: 1000, easing: Easing.ease })
      ),
      -1,
      true
    );
  }, []);

  const pulseStyle = useAnimatedStyle(() => ({
    transform: [{ scale: pulse.value }],
  }));

  return (
    <Animated.View style={pulseStyle}>
      <MatchingCardSkeleton />
    </Animated.View>
  );
}

const matchCardStyles = StyleSheet.create({
  container: {
    width: CARD_WIDTH,
    alignSelf: 'center',
  },
  mainImage: {
    backgroundColor: '#E8E8E8',
  },
  overlay: {
    position: 'absolute',
    bottom: 100,
    left: 20,
    right: 20,
  },
  infoRow: {
    flexDirection: 'row',
    alignItems: 'center',
    marginTop: 8,
  },
  actions: {
    flexDirection: 'row',
    justifyContent: 'center',
    alignItems: 'center',
    gap: 24,
    marginTop: -36,
  },
});
```

### ì»¨í…ì¸  ë¡œë” í›…

```typescript
// src/shared/hooks/useContentLoader.ts
import { useState, useEffect } from 'react';
import Animated, {
  useSharedValue,
  withTiming,
  withDelay,
} from 'react-native-reanimated';

interface UseContentLoaderOptions {
  minLoadingTime?: number;
  transitionDelay?: number;
}

export function useContentLoader<T>(
  data: T | null | undefined,
  isLoading: boolean,
  options: UseContentLoaderOptions = {}
) {
  const { minLoadingTime = 300, transitionDelay = 100 } = options;

  const [showSkeleton, setShowSkeleton] = useState(true);
  const [minTimeElapsed, setMinTimeElapsed] = useState(false);
  const contentOpacity = useSharedValue(0);

  // ìµœì†Œ ë¡œë”© ì‹œê°„ ë³´ì¥
  useEffect(() => {
    if (isLoading) {
      setMinTimeElapsed(false);
      const timer = setTimeout(() => {
        setMinTimeElapsed(true);
      }, minLoadingTime);
      return () => clearTimeout(timer);
    }
  }, [isLoading, minLoadingTime]);

  // ìŠ¤ì¼ˆë ˆí†¤ í‘œì‹œ ìƒíƒœ ê´€ë¦¬
  useEffect(() => {
    if (!isLoading && data && minTimeElapsed) {
      // ìŠ¤ì¼ˆë ˆí†¤ ìˆ¨ê¸°ê¸° (ë”œë ˆì´ í›„)
      const timer = setTimeout(() => {
        setShowSkeleton(false);
        contentOpacity.value = withDelay(
          transitionDelay,
          withTiming(1, { duration: 300 })
        );
      }, transitionDelay);

      return () => clearTimeout(timer);
    }
  }, [isLoading, data, minTimeElapsed, transitionDelay]);

  return {
    showSkeleton,
    contentOpacity,
    isReady: !showSkeleton && !!data,
  };
}

// ì‚¬ìš© ì˜ˆì‹œ
function MatchingScreen() {
  const { data, isLoading } = useMatchingPartner();
  const { showSkeleton, contentOpacity, isReady } = useContentLoader(data, isLoading);

  return (
    <View style={styles.container}>
      {showSkeleton && <MatchingCardSkeleton />}

      {isReady && (
        <Animated.View style={{ opacity: contentOpacity }}>
          <MatchingCard partner={data} />
        </Animated.View>
      )}
    </View>
  );
}
```

## âš ï¸ í”í•œ ì‹¤ìˆ˜ì™€ í•´ê²°ë²•

### 1. Shimmer ì„±ëŠ¥ ë¬¸ì œ

```typescript
// âŒ ì˜ëª»ëœ ì˜ˆ: ê° ìŠ¤ì¼ˆë ˆí†¤ì´ ë…ë¦½ì ìœ¼ë¡œ ì• ë‹ˆë©”ì´ì…˜
function BadSkeleton() {
  const progress = useSharedValue(0);

  useEffect(() => {
    progress.value = withRepeat(/*...*/);
  }, []);

  // ê° ì¸ìŠ¤í„´ìŠ¤ë§ˆë‹¤ ë³„ë„ ì• ë‹ˆë©”ì´ì…˜
}

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ: ShimmerProviderë¡œ ê³µìœ 
function GoodSkeleton() {
  const progress = useShimmerProgress(); // ê³µìœ ëœ ê°’ ì‚¬ìš©
  // ...
}
```

### 2. ë ˆì´ì•„ì›ƒ ì í”„

```typescript
// âŒ ì˜ëª»ëœ ì˜ˆ: ìŠ¤ì¼ˆë ˆí†¤ê³¼ ì‹¤ì œ ì»¨í…ì¸  í¬ê¸° ë¶ˆì¼ì¹˜
<SkeletonCard height={200} />
// vs
<RealCard height={250} /> // ì „í™˜ ì‹œ ë ˆì´ì•„ì›ƒ ì í”„

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ: ë™ì¼í•œ í¬ê¸° ìƒìˆ˜ ì‚¬ìš©
const CARD_HEIGHT = 220;

<SkeletonCard height={CARD_HEIGHT} />
<RealCard height={CARD_HEIGHT} />
```

### 3. ì´ë¯¸ì§€ ê¹œë¹¡ì„

```typescript
// âŒ ì˜ëª»ëœ ì˜ˆ: ì´ë¯¸ì§€ ë¡œë“œ ì¦‰ì‹œ í‘œì‹œ
function Image({ source }) {
  return <Image source={source} />; // ë¡œë“œ ì¤‘ ê¹œë¹¡ì„
}

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ: ë¡œë“œ ì™„ë£Œ í›„ í˜ì´ë“œì¸
function Image({ source }) {
  const [loaded, setLoaded] = useState(false);
  const opacity = useSharedValue(0);

  return (
    <>
      {!loaded && <Skeleton />}
      <Animated.Image
        source={source}
        style={{ opacity }}
        onLoad={() => {
          setLoaded(true);
          opacity.value = withTiming(1);
        }}
      />
    </>
  );
}
```

## ğŸ’¡ ì„±ëŠ¥ ìµœì í™” íŒ

### 1. ìŠ¤ì¼ˆë ˆí†¤ ìºì‹±

```typescript
// ìŠ¤ì¼ˆë ˆí†¤ ì»´í¬ë„ŒíŠ¸ ë©”ëª¨ì´ì œì´ì…˜
export const MemoizedSkeleton = React.memo(Skeleton);

// ë³µí•© ìŠ¤ì¼ˆë ˆí†¤ë„ ë©”ëª¨ì´ì œì´ì…˜
export const MemoizedSkeletonCard = React.memo(SkeletonCard);
```

### 2. ì¡°ê±´ë¶€ Shimmer

```typescript
// í™”ë©´ì— ë³´ì¼ ë•Œë§Œ Shimmer í™œì„±í™”
import { useIsFocused } from '@react-navigation/native';

function ScreenWithSkeleton() {
  const isFocused = useIsFocused();

  return (
    <ShimmerProvider enabled={isFocused}>
      <SkeletonContent />
    </ShimmerProvider>
  );
}
```

## ğŸ‹ï¸ ì—°ìŠµ ë¬¸ì œ

### ë¬¸ì œ 1: ì´ë¯¸ì§€ ê·¸ë¦¬ë“œ ìŠ¤ì¼ˆë ˆí†¤
3ì—´ ì´ë¯¸ì§€ ê·¸ë¦¬ë“œì˜ ìŠ¤ì¼ˆë ˆí†¤ì„ êµ¬í˜„í•˜ì„¸ìš”. ê° ì…€ì´ ìˆœì°¨ì ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ëŠ” íš¨ê³¼ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.

### ë¬¸ì œ 2: ì¹´ë“œ ìŠ¤ì™€ì´í”„ ìŠ¤ì¼ˆë ˆí†¤
Tinder ìŠ¤íƒ€ì¼ ì¹´ë“œì˜ ìŠ¤ì¼ˆë ˆí†¤ì„ êµ¬í˜„í•˜ì„¸ìš”. ì¹´ë“œê°€ ì‚´ì§ í”ë“¤ë¦¬ëŠ” íš¨ê³¼ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.

### ë¬¸ì œ 3: ì ì‘í˜• ìŠ¤ì¼ˆë ˆí†¤
ì‹¤ì œ ì»¨í…ì¸ ì˜ ë†’ì´ì— ë§ê²Œ ìë™ìœ¼ë¡œ ì¡°ì ˆë˜ëŠ” ìŠ¤ì¼ˆë ˆí†¤ì„ êµ¬í˜„í•˜ì„¸ìš”.

## ğŸ“š ì´ ì¥ì—ì„œ ë°°ìš´ ë‚´ìš©

1. **ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸**: Skeleton, SkeletonCircle, SkeletonText
2. **Shimmer ìµœì í™”**: ShimmerProviderë¡œ ì• ë‹ˆë©”ì´ì…˜ ê³µìœ 
3. **ì´ë¯¸ì§€ í”Œë ˆì´ìŠ¤í™€ë”**: Blurhash, ì ì§„ì  ë¡œë”©
4. **ì „í™˜ íš¨ê³¼**: í˜ì´ë“œ, ìŠ¤íƒœê±°, ìŠ¤ì¼€ì¼ ì „í™˜
5. **í˜ì´ì§€ ìŠ¤ì¼ˆë ˆí†¤**: í”¼ë“œ, í”„ë¡œí•„, ì±„íŒ… ëª©ë¡
6. **ì„±ëŠ¥ ìµœì í™”**: ë©”ëª¨ì´ì œì´ì…˜, ì¡°ê±´ë¶€ ë Œë”ë§

## ë‹¤ìŒ ì¥ ì˜ˆê³ 

**Chapter 55: ìŠ¬ë¼ì´ë”ì™€ ì„ íƒê¸°**ì—ì„œëŠ” ê°’ì„ ì„ íƒí•˜ëŠ” ë‹¤ì–‘í•œ UI ì»´í¬ë„ŒíŠ¸ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤. ë²”ìœ„ ìŠ¬ë¼ì´ë”, ë³„ì  ì„ íƒê¸°, ì‹œê°„/ë‚ ì§œ ì„ íƒê¸° ë“±ì˜ ì¸í„°ë™í‹°ë¸Œ ìš”ì†Œë¥¼ ë§Œë“­ë‹ˆë‹¤.
