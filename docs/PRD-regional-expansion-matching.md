# 썸타임 지역 확장 매칭 PRD

## 1. 개요

### 1.1 배경

**현재 문제**
- 같은 지역 내에서 매칭 조건을 만족하는 상대를 찾지 못해 반복적으로 매칭 실패하는 유저 발생
- 실제 사례: 특정 유저가 하루에 수십 차례 매칭/재매칭 실패
- 매칭 실패 → 서비스 이탈 → 썸타임의 핵심 가치 제공 불가

**시장 인사이트**
- 지방 대학의 경우 인구 밀도 부족으로 매칭 풀이 형성되지 않아 서비스 실패
- 경쟁사의 전국 무작위 매칭은 실제 만남으로 이어지기 어려움
- 썸타임의 기회: 가까운 지역부터 점진적으로 확장하는 스마트 매칭

### 1.2 목표

**비즈니스 목표**
- 매칭 실패율 50% 감소
- 매칭 성공률 25% 향상
- 서비스 이탈률 30% 감소

**사용자 목표**
- "매칭 실패" 대신 "더 넓은 지역에서 인연 찾기" 제공
- 투명한 안내와 명확한 선택권 제공
- 거리를 긍정적으로 재해석하는 경험

### 1.3 핵심 가치

**"조금 시간이 걸리더라도, 가장 가까운 곳에서 당신과 잘 맞는 인연을 찾아드릴게요."**

- **투명성**: 확장 진행 전 명확한 안내
- **선택권**: 사용자가 진행 여부 결정
- **심플함**: 한 번의 선택으로 완료

---

## 2. 사용자 시나리오

### 시나리오 1: 대전 사용자 (일반 매칭 성공)

**김민수 (대전, 25세 남성)**

1. 홈 화면에서 [매칭 시작] 버튼 클릭
2. 로딩 중... "매칭 중이에요"
3. **매칭 성공!** (약 3초 소요)
4. 프로필 확인
   - 박지은 (대전, 23세)
   - KAIST 학생
   - 공통 관심사: 카페, 영화

### 시나리오 2: 대전 사용자 (재매칭 후 지역 확장)

**김민수 (대전, 25세 남성)**

1. 홈 화면에서 [매칭 시작] 버튼 클릭
2. 로딩 중... "매칭 중이에요"
3. **매칭 성공** → 프로필 확인
4. [패스] 클릭 → 재매칭 시도
5. 로딩 중... "다시 매칭 중이에요"
6. **재매칭 실패** (현재 지역에 매칭 가능한 상대 없음)

7. **[모달 표시]**
   ```
   ┌────────────────────────────────────┐
   │                                    │
   │  조금 더 넓은 지역에서 찾아볼까요?   │
   │                                    │
   │  현재 지역에서 매칭 가능한 상대가    │
   │  없어요. 인근 지역까지 확장해서     │
   │  찾아볼게요!                        │
   │                                    │
   │  ✨ 가까운 곳부터 차근차근          │
   │  🚗 대전 → 세종 → 충청권           │
   │                                    │
   │  [다음에 할게요]  [진행할게요]     │
   │                                    │
   └────────────────────────────────────┘
   ```

8. **[진행할게요] 버튼 클릭**

9. 모달 닫힘 → 로딩 화면 표시
   - "조금 더 넓은 지역에서 찾고 있어요"

10. **외부 매칭 API 호출** (백엔드에서 자동 확장 처리)
    - 1단계: 대전+세종 검색
    - 2단계: 충청권 검색 (필요 시)
    - 3단계: 전국 검색 (필요 시)

11. **매칭 성공!** (약 5-7초 소요)

12. 프로필 확인
    ```
    [배지] 🚗 세종에서 찾아온 인연 (약 20km)

    이서연, 24세
    고려대 세종캠퍼스

    공통 관심사: 독서, 카페
    ```

**상대방 시점 - 이서연 (세종, 24세)**

1. 푸시 알림: "새로운 매칭이 도착했어요!"
2. 앱 실행 → 홈 화면
3. 프로필 카드 확인
   ```
   [배지] 🌟 대전에서 찾아온 인연 (약 20km)
   ```
4. "오 대전에서 나를 찾아왔네? 특별한데?"
5. [좋아요] 클릭
6. 매칭 성립! 🎉

### 시나리오 3: 서울 사용자 (재매칭 → 확장 거부)

**박준혁 (서울 강남, 26세 남성)**

1. 매칭 시작 → 성공 → 프로필 확인
2. [패스] 클릭 → 재매칭 시도
3. 재매칭 실패

4. **[모달 표시]**
   "조금 더 넓은 지역에서 찾아볼까요?"

5. **[다음에 할게요] 버튼 클릭**

6. 홈 화면으로 복귀
   - 나중에 다시 [매칭 시작] 가능

### 시나리오 4: 제주 사용자 (전국 확장)

**강태양 (제주, 23세 남성)**

1. 매칭 시작 → 실패 (지역 내 매칭 상대 없음)
2. 모달 표시: "조금 더 넓은 지역에서 찾아볼까요?"
3. [진행할게요] 클릭
4. 로딩 중... (약 10초, 전국 확장)
5. **매칭 성공!**
6. 프로필 확인
   ```
   [배지] 🌏 부산에서 찾아온 인연

   윤하늘, 22세
   부산대 학생

   공통 관심사: 여행, 사진
   ```

---

## 3. UX Writing

### 3.1 확장 안내 모달

#### 모달 제목
```
조금 더 넓은 지역에서 찾아볼까요?
```

#### 모달 본문
```
현재 지역에서 매칭 가능한 상대가 없어요.
인근 지역까지 확장해서 찾아볼게요!

✨ 가까운 곳부터 차근차근
🚗 [현재 지역] → [인근 지역] → [광역권]
```

**지역별 예시:**

**대전 사용자**
```
🚗 대전 → 세종 → 충청권
```

**서울 사용자**
```
🚗 서울 → 경기 남부 → 수도권 전체
```

**부산 사용자**
```
🚗 부산 → 울산/양산 → 영남권
```

**제주 사용자**
```
🌏 제주 → 전국
```

#### 버튼 구성

**Primary 버튼 (오른쪽)**
```
진행할게요
```
- 외부 매칭 API 호출
- 로딩 화면 전환

**Secondary 버튼 (왼쪽)**
```
다음에 할게요
```
- 모달 닫기
- 홈 화면 복귀

### 3.2 로딩 메시지

#### 일반 매칭
```
매칭 중이에요
```

#### 재매칭
```
다시 매칭 중이에요
```

#### 외부 매칭 (확장 진행 중)
```
조금 더 넓은 지역에서 찾고 있어요
```

### 3.3 매칭 성공 메시지

#### 같은 지역 매칭
```
매칭이 완료되었어요! 🎉
```

#### 확장 지역 매칭
```
매칭이 완료되었어요! 🎉
```
(배지는 프로필 카드에 자동 표시)

### 3.4 배지 문구

#### 인근 지역 매칭 (50km 이내)
```
🚗 [도시명]에서 찾아온 인연 (약 XXkm)
```

**예시:**
- 🚗 세종에서 찾아온 인연 (약 20km)
- 🚗 성남에서 찾아온 인연 (약 15km)
- 🚗 인천에서 찾아온 인연 (약 35km)

#### 광역권/전국 매칭 (50km 초과)
```
🌏 [도시명]에서 찾아온 인연
```

**예시:**
- 🌏 부산에서 찾아온 인연
- 🌏 대구에서 찾아온 인연

### 3.5 매칭 완전 실패 시 메시지

```
😢 아쉽게도 현재 매칭 가능한 상대가 없어요

다음을 시도해보세요:
• 관심사를 조금 더 다양하게 설정해보세요
• 프로필을 더 매력적으로 꾸며보세요
• 조금 시간이 지나면 새로운 인연이 가입할 거예요

[프로필 수정하기]  [나중에 다시 시도]
```

---

## 4. UI 화면 설계

### 4.1 매칭 진행 화면 (일반)

```
┌────────────────────────────────────────┐
│                                        │
│        [로딩 애니메이션]                 │
│                                        │
│         매칭 중이에요                   │
│                                        │
└────────────────────────────────────────┘
```

### 4.2 확장 안내 모달 (재매칭 실패 시)

```
┌────────────────────────────────────────┐
│                                        │
│  조금 더 넓은 지역에서 찾아볼까요?       │
│                                        │
│  현재 지역에서 매칭 가능한 상대가        │
│  없어요. 인근 지역까지 확장해서         │
│  찾아볼게요!                            │
│                                        │
│  ✨ 가까운 곳부터 차근차근              │
│  🚗 대전 → 세종 → 충청권               │
│                                        │
│  ┌──────────┐  ┌──────────┐          │
│  │다음에 할게요│  │진행할게요 │          │
│  └──────────┘  └──────────┘          │
│                                        │
└────────────────────────────────────────┘
```

**모달 스타일 가이드:**
- `useModal()` 훅 사용
- `primaryButton`: "진행할게요" (브랜드 컬러)
- `secondaryButton`: "다음에 할게요" (회색)
- 아이콘: ✨ 🚗 사용 (텍스트에 포함)

### 4.3 외부 매칭 로딩 화면

```
┌────────────────────────────────────────┐
│                                        │
│        [로딩 애니메이션]                 │
│                                        │
│   조금 더 넓은 지역에서 찾고 있어요       │
│                                        │
└────────────────────────────────────────┘
```

### 4.4 프로필 화면 (배지 포함)

```
┌────────────────────────────────────────┐
│                                        │
│  [배지] 🚗 세종에서 찾아온 인연 (약 20km) │
│                                        │
│        [프로필 사진]                    │
│                                        │
│  이서연, 24세                           │
│  고려대 세종캠퍼스                       │
│  세종시 • 1.2km                         │
│                                        │
│  💬 "카페에서 책 읽는 걸 좋아해요"        │
│                                        │
│  공통 관심사                            │
│  📚 독서  ☕ 카페  🎬 영화               │
│                                        │
│  [ ❌ 패스 ]     [ ❤️ 좋아요 ]          │
│                                        │
└────────────────────────────────────────┘
```

---

## 5. 기술 흐름도

### 5.1 전체 플로우 (사용자 관점)

```
[매칭 시작]
   ↓
로딩: "매칭 중이에요"
   ↓
일반 매칭 API 호출
   ↓
┌─────────────────┐
│   매칭 성공?     │
└─────────────────┘
   ↓           ↓
  YES          NO
   ↓           ↓
프로필 표시   [모달 표시]
   ↓        "조금 더 넓은 지역에서
   ↓         찾아볼까요?"
   ↓           ↓
[패스] 클릭  ┌─────────────────┐
   ↓        │ 사용자 선택?      │
재매칭 시도  └─────────────────┘
   ↓           ↓           ↓
   ↓      진행할게요    다음에 할게요
   ↓           ↓           ↓
   ↓        외부 매칭     홈 화면
   ↓        API 호출      복귀
   ↓           ↓
   ↓        로딩: "조금 더 넓은 지역에서
   ↓               찾고 있어요"
   ↓           ↓
   ↓        ┌─────────────────┐
   ↓        │   매칭 성공?     │
   ↓        └─────────────────┘
   ↓           ↓           ↓
   ↓          YES          NO
   ↓           ↓           ↓
   ↓        프로필 표시   실패 안내
   ↓        (배지 포함)    화면
   ↓
   ↓ (재매칭 반복 가능)
   ↓
  ...
```

### 5.2 API 호출 구조

#### API 1: 일반 매칭 (기존)
```
POST /api/matching/match

요청:
{
  "userId": "user123"
}

응답 (성공):
{
  "success": true,
  "match": {
    "userId": "user456",
    "profile": { ... },
    "distance": 2.3
  }
}

응답 (실패):
{
  "success": false,
  "code": "NO_MATCH_FOUND",
  "message": "현재 지역에서 매칭 가능한 상대가 없습니다"
}
```

#### API 2: 외부 매칭 (신규)
```
POST /api/matching/external-match

요청:
{
  "userId": "user123"
}

응답 (성공):
{
  "success": true,
  "match": {
    "userId": "user789",
    "profile": { ... },
    "distance": 23.5,
    "region": "세종",
    "expansionLevel": 1,  // 1: 인근, 2: 광역, 3: 전국
    "badge": {
      "icon": "🚗",
      "text": "세종에서 찾아온 인연",
      "distance": "약 20km"
    }
  }
}

응답 (실패):
{
  "success": false,
  "code": "NO_MATCH_FOUND_ANYWHERE",
  "message": "전국에서 매칭 가능한 상대가 없습니다"
}
```

### 5.3 백엔드 확장 로직 (외부 매칭 API 내부)

```
외부 매칭 API 요청 받음
   ↓
사용자 위치 조회
   ↓
┌─────────────────────────────────────┐
│ 1단계: 인근 지역 검색                │
│ (예: 대전 → 대전+세종)              │
└─────────────────────────────────────┘
   ↓
결과 있음? ─── YES ──→ 매칭 반환 ✅
   ↓                    + 배지 정보
   NO
   ↓
┌─────────────────────────────────────┐
│ 2단계: 광역권 검색                   │
│ (예: 대전+세종 → 충청권 전체)        │
└─────────────────────────────────────┘
   ↓
결과 있음? ─── YES ──→ 매칭 반환 ✅
   ↓                    + 배지 정보
   NO
   ↓
┌─────────────────────────────────────┐
│ 3단계: 전국 검색                     │
└─────────────────────────────────────┘
   ↓
결과 있음? ─── YES ──→ 매칭 반환 ✅
   ↓                    + 배지 정보
   NO
   ↓
매칭 실패 반환 ❌
```

### 5.4 타이밍 다이어그램

```
사용자           프론트엔드              백엔드
  |                  |                    |
  | [매칭 시작]       |                    |
  |----------------->|                    |
  |                  | 일반 매칭 API       |
  |                  |------------------->|
  |  로딩 표시...     |                    | (같은 지역 검색)
  |                  |   <매칭 실패>       |
  |                  |<-------------------|
  |  [모달 표시]      |                    |
  |  "조금 더 넓은..."  |                    |
  |                  |                    |
  | [진행할게요]      |                    |
  |----------------->|                    |
  |                  | 외부 매칭 API       |
  |                  |------------------->|
  |  로딩 표시...     |                    | (1단계: 인근 지역)
  |                  |                    |
  |                  |                    | (2단계: 광역권)
  |                  |                    |
  |                  |   <매칭 성공>       |
  |                  |<-------------------| + 배지 정보
  |  프로필 표시      |                    |
  |  (배지 포함)      |                    |
  |<-----------------|                    |
  |                  |                    |
```

---

## 6. 지역 그룹 구성

### 6.1 수도권

#### 1단계: 인근 지역
- **서울 강남/서초** → 서울 강남/서초, 성남, 과천
- **서울 강북** → 서울 강북, 의정부, 양주
- **서울 강동** → 서울 강동, 하남, 구리
- **서울 강서** → 서울 강서, 부천, 김포
- **인천** → 인천, 부천, 김포
- **성남/분당** → 성남, 수원, 용인
- **수원** → 수원, 화성, 오산

#### 2단계: 광역권 (수도권 전체)
- 서울, 인천, 경기도 전체

### 6.2 충청권

#### 1단계: 인근 지역
- **대전** → 대전, 세종
- **천안** → 천안, 아산, 세종
- **청주** → 청주, 충주, 제천

#### 2단계: 광역권 (충청권 전체)
- 대전, 세종, 천안, 아산, 청주, 충주, 제천, 공주, 서산, 논산, 보령

### 6.3 영남권

#### 1단계: 인근 지역 (동부)
- **부산** → 부산, 울산, 양산, 김해
- **창원** → 창원, 김해, 밀양
- **거제** → 거제, 통영, 사천, 진주

#### 1단계: 인근 지역 (서부)
- **대구** → 대구, 경산, 영천
- **포항** → 포항, 경주
- **구미** → 구미, 김천

#### 2단계: 광역권 (영남권 전체)
- 부산, 울산, 대구 및 경상도 전체

### 6.4 호남권

#### 1단계: 인근 지역
- **광주** → 광주, 나주, 화순
- **전주** → 전주, 군산, 익산
- **여수** → 여수, 순천, 광양

#### 2단계: 광역권 (호남권 전체)
- 광주, 전북, 전남 전체

### 6.5 강원권

#### 1단계: 인근 지역
- **춘천** → 춘천, 홍천
- **원주** → 원주, 횡성
- **강릉** → 강릉, 동해, 속초

#### 2단계: 광역권 (강원권 전체)
- 강원도 전체

### 6.6 제주권

#### 1단계: 제주 전역
- 제주시, 서귀포시

#### 2단계: 전국
- 제주 → 바로 전국 확장

---

## 7. 배지 상세 가이드

### 7.1 배지 표시 규칙

#### 표시하는 경우
- 외부 매칭 API를 통해 매칭된 경우
- 상대방 프로필 카드에 표시
- 채팅방 첫 진입 시 시스템 메시지로 표시

#### 표시하지 않는 경우
- 일반 매칭 API로 성공한 경우 (같은 지역)

### 7.2 배지 디자인 가이드

#### 아이콘 선택
- **🚗 (자동차)**: 50km 이내, 당일 이동 가능한 거리
- **🌏 (지구)**: 50km 초과, 광역/전국 단위

#### 색상 (StyleSheet 사용)
```javascript
const badgeStyles = StyleSheet.create({
  container: {
    backgroundColor: colors.lightPurple,  // 연한 보라
    paddingHorizontal: 12,
    paddingVertical: 6,
    borderRadius: 16,
  },
  text: {
    color: colors.primaryPurple,  // 메인 보라
    fontSize: 13,
    fontWeight: '600',
  },
});
```

#### 크기
- **프로필 카드 상단**: 큰 사이즈 (눈에 잘 띄게)
- **채팅 리스트**: 작은 사이즈 (아이콘만)

### 7.3 배지 문구 톤앤매너

#### 기본 원칙
- 긍정적이고 따뜻한 톤
- "멀다"가 아니라 "찾아왔다"는 표현
- 거리는 참고 정보로만 제공

#### 좋은 예시
- ✅ "세종에서 찾아온 인연"
- ✅ "당신을 찾아 멀리서 온 인연"
- ✅ "부산에서 찾아온 특별한 인연"

#### 나쁜 예시
- ❌ "세종에 사는 사람"
- ❌ "20km 떨어진 상대"
- ❌ "멀리 있는 인연"

---

## 8. 프론트엔드 구현 가이드

### 8.1 모달 구현 예시

```typescript
import { useModal } from '@/src/shared/hooks/use-modal';
import { useMemo } from 'react';

const useRegionalExpansionModal = () => {
  const { showModal } = useModal();

  const showExpansionModal = (
    userRegion: string,
    expansionPath: string,
    onConfirm: () => void,
    onCancel: () => void
  ) => {
    const ExpansionContent = () => (
      <View style={styles.modalContent}>
        <Text style={styles.description}>
          현재 지역에서 매칭 가능한 상대가 없어요.{'\n'}
          인근 지역까지 확장해서 찾아볼게요!
        </Text>

        <View style={styles.pathContainer}>
          <Text style={styles.pathLabel}>✨ 가까운 곳부터 차근차근</Text>
          <Text style={styles.pathText}>🚗 {expansionPath}</Text>
        </View>
      </View>
    );

    showModal({
      title: '조금 더 넓은 지역에서 찾아볼까요?',
      children: <ExpansionContent />,
      secondaryButton: {
        text: '다음에 할게요',
        onClick: onCancel,
      },
      primaryButton: {
        text: '진행할게요',
        onClick: onConfirm,
      },
    });
  };

  return { showExpansionModal };
};

const styles = StyleSheet.create({
  modalContent: {
    paddingVertical: 8,
  },
  description: {
    fontSize: 15,
    lineHeight: 22,
    color: colors.gray[700],
    textAlign: 'center',
    marginBottom: 20,
  },
  pathContainer: {
    backgroundColor: colors.gray[50],
    padding: 16,
    borderRadius: 12,
  },
  pathLabel: {
    fontSize: 13,
    color: colors.gray[600],
    marginBottom: 6,
  },
  pathText: {
    fontSize: 14,
    fontWeight: '600',
    color: colors.primaryPurple,
  },
});
```

### 8.2 매칭 플로우 예시

```typescript
// features/matching/hooks/use-matching.ts

import { useMutation } from '@tanstack/react-query';
import { matchingApi } from '../apis/matching-api';
import { useRegionalExpansionModal } from './use-regional-expansion-modal';

export const useMatching = () => {
  const { showExpansionModal } = useRegionalExpansionModal();

  // 일반 매칭
  const normalMatchMutation = useMutation({
    mutationFn: matchingApi.match,
    onSuccess: (data) => {
      if (data.success) {
        // 프로필 화면으로 이동
        navigateToProfile(data.match);
      } else {
        // 매칭 실패 → 모달 표시
        showExpansionPrompt();
      }
    },
  });

  // 외부 매칭
  const externalMatchMutation = useMutation({
    mutationFn: matchingApi.externalMatch,
    onSuccess: (data) => {
      if (data.success) {
        // 프로필 화면으로 이동 (배지 포함)
        navigateToProfile(data.match, data.badge);
      } else {
        // 완전 실패
        showCompleteFailureScreen();
      }
    },
  });

  const showExpansionPrompt = () => {
    const userRegion = getUserRegion(); // 예: "대전"
    const expansionPath = getExpansionPath(userRegion); // 예: "대전 → 세종 → 충청권"

    showExpansionModal(
      userRegion,
      expansionPath,
      () => {
        // 진행할게요 클릭
        externalMatchMutation.mutate();
      },
      () => {
        // 다음에 할게요 클릭
        navigateToHome();
      }
    );
  };

  return {
    startMatching: () => normalMatchMutation.mutate(),
    isLoading: normalMatchMutation.isPending || externalMatchMutation.isPending,
  };
};
```

### 8.3 로딩 메시지 처리

```typescript
const getLoadingMessage = (
  matchingType: 'normal' | 'rematch' | 'external'
): string => {
  switch (matchingType) {
    case 'normal':
      return '매칭 중이에요';
    case 'rematch':
      return '다시 매칭 중이에요';
    case 'external':
      return '조금 더 넓은 지역에서 찾고 있어요';
  }
};
```

### 8.4 배지 컴포넌트

```typescript
// shared/ui/match-badge.tsx

import { View, Text, StyleSheet } from 'react-native';
import { colors } from '@/src/shared/constants/colors';

interface MatchBadgeProps {
  icon: string;
  text: string;
  distance?: string;
}

export const MatchBadge = ({ icon, text, distance }: MatchBadgeProps) => {
  return (
    <View style={styles.container}>
      <Text style={styles.text}>
        {icon} {text} {distance && `(${distance})`}
      </Text>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    backgroundColor: colors.lightPurple,
    paddingHorizontal: 16,
    paddingVertical: 8,
    borderRadius: 20,
    alignSelf: 'flex-start',
    marginBottom: 16,
  },
  text: {
    color: colors.primaryPurple,
    fontSize: 14,
    fontWeight: '600',
  },
});
```

---

## 9. 긍정적 사용자 경험 예시

### 9.1 대전-세종 커플의 이야기

**김민수 (대전, 25세)**

> "재매칭했는데 안 돼서 '아 실패하나' 했는데,
> 모달이 뜨더라고요. '조금 더 넓은 지역에서 찾아볼까요?'
>
> 진행해보니까 세종에서 딱 맞는 사람을 찾아줬어요.
>
> 프로필 보니까 취향이 너무 잘 맞더라고요.
>
> 실제로 만나보니 버스로 30분이면
> 생각보다 가깝더라구요.
>
> 지금은 주말마다 만나고 있어요!"

**이서연 (세종, 24세)**

> "배지 보고 '대전에서 나를 찾아왔구나' 했는데,
> 그게 되게 특별하게 느껴졌어요.
>
> '이 사람이 나를 만나려고 확장까지 했구나'
> 생각하니까 더 설레더라고요.
>
> 선택권을 준 게 좋았어요. 강제가 아니라.
>
> 지금은 한 달째 만나고 있는데,
> 거리가 전혀 문제 안 됐어요!"

### 9.2 서울-성남 커플의 이야기

**박준혁 (서울 강남, 26세)**

> "재매칭하고 모달 떴을 때
> '아, 더 넓은 지역에서도 찾을 수 있구나' 알았어요.
>
> 선택권을 준 게 좋았어요.
> 원하지 않으면 안 해도 되니까.
>
> 그런데 궁금해서 눌러봤는데,
> 성남에서 딱 맞는 사람 찾아줘서 놀랐어요.
>
> 지하철로 30분이면 되니까
> 오히려 서울 반대편보다 더 가까워요.
>
> 투명하게 알려줘서 신뢰가 갔어요!"

---

## 10. 성공 지표

### 10.1 핵심 지표

| 지표 | 현재 | 목표 (3개월) |
|------|------|-------------|
| 재매칭 후 확장 모달 표시율 | - | 20% |
| 모달에서 "진행할게요" 선택율 | - | 60% 이상 |
| 확장 매칭 성공률 | - | 70% 이상 |
| 확장 매칭 후 대화 전환율 | - | 일반 매칭 대비 80% 이상 |
| 서비스 이탈률 | 45% | 30% 이하 |
| 배지 긍정 반응 | - | 70% 이상 |
| 평균 외부 매칭 소요 시간 | - | 10초 이하 |

### 10.2 모니터링 항목

#### 실시간 모니터링
- 시간대별 재매칭 실패 건수
- 확장 모달 표시 빈도
- "진행할게요" vs "다음에 할게요" 비율
- 지역별 확장 빈도
- 확장 단계별 성공률 (1단계/2단계/3단계)
- 평균 외부 매칭 소요 시간

#### 주간 리포트
- 가장 확장 빈도 높은 지역 TOP 5
- 지역 확장 성공 사례
- 배지 관련 유저 피드백
- 모달 표시 후 이탈률
- 확장 매칭 후 채팅 전환율

---

## 11. 마케팅 메시지

### 11.1 기능 출시 공지

#### 커뮤니티 게시글

```
📢 썸타임 업데이트 소식

"내 지역에 매칭 상대가 없어요 😭"
이런 고민 있으셨죠?

이제 썸타임이 조금 더 넓은 지역에서도
당신과 잘 맞는 인연을 찾아드려요!

✨ 새로운 경험
• 투명한 안내: "조금 더 넓은 지역에서 찾아볼까요?"
• 선택은 당신의 몫: 원하면 진행, 아니면 다음에
• 가까운 곳부터 차근차근: 시스템이 자동으로 확장

🚗 특별한 배지
"세종에서 찾아온 인연" 배지로
멀리서 찾아온 특별함을 느껴보세요!

🌏 거리가 조금 멀어도 괜찮아요
진짜 잘 맞는 사람이라면
조금 멀어도 만날 가치가 있잖아요?

[지금 바로 매칭 시작하기]
```

### 11.2 FAQ

**Q1: 자동으로 지역이 확장되나요?**

A: 아니요! 현재 지역에서 매칭 상대를 찾지 못하면, "조금 더 넓은 지역에서 찾아볼까요?" 모달이 표시돼요. **"진행할게요"를 선택해야만** 지역 확장이 진행됩니다. 선택권은 항상 당신에게 있어요!

**Q2: 매칭이 오래 걸리나요?**

A: 같은 지역에 매칭 상대가 있으면 기존과 동일하게 빠르게 완료돼요 (약 3초). 지역을 확장하는 경우에도 대부분 5-10초 이내에 완료됩니다.

**Q3: 얼마나 멀리까지 확장되나요?**

A: 같은 생활권(대전-세종, 서울-경기 등)부터 시작해서 필요하면 광역권, 그래도 없으면 전국까지 자동으로 확장돼요. 걱정 마세요! 대부분 가까운 지역에서 매칭되고 있어요.

**Q4: "멀리서 찾아온 인연" 배지가 부담스러울 것 같아요.**

A: 오히려 많은 분들이 "특별하다", "감동이었다"고 말씀하세요. "나를 만나려고 멀리서 왔구나" 하는 생각에 더 설레고 특별하게 느껴진대요!

**Q5: "다음에 할게요"를 누르면 어떻게 되나요?**

A: 모달이 닫히고 홈 화면으로 돌아가요. 나중에 다시 매칭을 시작할 수 있어요. 부담 없이 원할 때만 확장 매칭을 진행하세요!

---

## 12. 핵심 요약

### 12.1 핵심 가치

**"투명하게 안내하고, 선택은 당신에게"**

- 매칭 실패 → 포기가 아니라 → **선택의 기회**
- 복잡한 과정 → 없음 → **한 번의 선택으로 완료**
- 거리가 장벽 → 아니라 → **특별함의 증거**

### 12.2 기대 효과

#### 정량적 효과
- 재매칭 실패 후 이탈률 50% 감소
- 확장 매칭 성공률 70% 이상
- 전체 매칭 성공률 25% 향상
- 서비스 이탈률 30% 이하

#### 정성적 효과
- "썸타임은 끝까지 기회를 준다"는 신뢰
- "투명하고 선택권이 있다"는 평가
- "복잡하지 않고 간단하다"는 만족
- 지방 유저들의 서비스 만족도 향상

### 12.3 차별화 포인트

#### vs. 경쟁사
- **틴더/글램**: 전국 무작위 매칭 (거리 고려 X)
- **위피**: 지역 고정 (확장 불가)
- **썸타임**: 가까운 곳부터 점진적 확장 + **사용자 선택권** ✅

#### 핵심 메시지

**"가까우면 좋지만, 조금 멀어도 괜찮아요. 진짜 잘 맞는 사람을 찾는 게 중요하니까."**

---

## 13. 개발 체크리스트

### 13.1 백엔드

- [ ] 외부 매칭 API 구현 (`/api/matching/external-match`)
- [ ] 지역 그룹 정의 및 확장 로직 구현
- [ ] 배지 정보 생성 로직 구현
- [ ] 확장 단계별 성공률 로깅
- [ ] 거리 계산 및 아이콘 선택 로직

### 13.2 프론트엔드

- [ ] 확장 안내 모달 UI 구현
- [ ] 외부 매칭 API 연동
- [ ] 로딩 메시지 상태 관리
- [ ] 배지 컴포넌트 구현
- [ ] 프로필 카드 배지 표시
- [ ] 채팅방 시스템 메시지 배지 표시
- [ ] 지역별 확장 경로 문구 생성 함수

### 13.3 분석/모니터링

- [ ] 확장 모달 표시 이벤트 로깅
- [ ] "진행할게요" / "다음에 할게요" 선택 로깅
- [ ] 외부 매칭 성공/실패 로깅
- [ ] 확장 단계별 성공률 트래킹
- [ ] 평균 소요 시간 측정
- [ ] 배지 긍정 반응 설문 구현

### 13.4 QA

- [ ] 각 지역별 확장 플로우 테스트
- [ ] 모달 UI/UX 테스트
- [ ] 배지 표시 정확성 테스트
- [ ] API 타임아웃 처리 테스트
- [ ] 전국 확장까지 실패 시나리오 테스트
- [ ] 재매칭 → 확장 플로우 테스트

---

**문서 버전**: 2.0
**최종 수정일**: 2025-12-20
**담당자**: Product Team
