# PRD: 2인 협동 미니게임 (Duo Game)

> **작성일**: 2026-02-14
> **버전**: v1.0
> **우선순위**: P0 (ICE Score 672, 사업성 88/100)
> **예상 개발 기간**: Phase 1 MVP 2주, 전체 6주

---

## 1. 문제 정의

### 현재 상황
- 썸타임의 유저 플로우: `매칭 → 대화 → ???(단절) → 만남`
- **"대화→만남" 전환율이 낮음** — 대화만 하다 끝나는 매치가 다수
- 유저 니즈 #2: "자연스럽게 오프라인 전환" (강도 5, 미충족도 5)
- 유저 니즈 #3: "대화를 안 끊기게 유지" (강도 5, 미충족도 4)
- 데이팅 앱 평균 Day 7 리텐션: 11%, Day 30: 5%

### 핵심 가설
> "매칭된 두 사람이 단순 텍스트 대화가 아닌 **함께 게임/미션을 수행**하면,
> 공유 경험이 만들어지고, 이것이 **오프라인 만남으로의 자연스러운 전환**을 유도한다."

### 심리학적 근거
- **Self-Expansion Theory** (Aron & Aron, 1986): 함께 새로운 활동 시 관계 만족도, 열정 증가
- **Uncertainty Reduction Theory** (Berger & Calabrese, 1975): 상호 질문을 통한 불확실성 감소 → 친밀감 증가
- **2025 연구**: 게임화된 접근이 **지속 사용 + 깊은 연결** 모두를 강하게 예측 (Taylor & Francis)

---

## 2. 목표 지표

### Primary Metrics
| 지표 | 현재 (추정) | 목표 | 측정 방법 |
|------|-----------|------|----------|
| 대화 지속일수 | 3일 | 4.2일 (+40%) | 매칭 후 마지막 메시지까지 일수 |
| 오프라인 전환율 | 10% | 16% (+60%) | 만남 제안 발생 / 전체 매칭 |
| 48시간 리텐션 | 40% | 56% (+40%) | 매칭 48h 후 양방향 대화 존재 |

### Secondary Metrics
| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| 아이스브레이커 참여율 | 60%+ | 매칭 후 24h 내 게임 시작 비율 |
| 채팅 내 게임 이용률 | 30%+ | 게임 시작 / 전체 채팅방 |
| 게임 완료율 | 80%+ | 양방향 답변 완료 / 게임 시작 |
| 게임 후 대화 전환율 | 70%+ | 게임 완료 후 5분 내 텍스트 메시지 발생 |

---

## 3. 유저 플로우

### 3.1 전체 여정

```
매칭 성사
   ↓
[Phase 1] 아이스브레이커 게임 (자동 제안)
   - 채팅방 첫 진입 시 NewMatchBanner 하단에 표시
   - 가벼운 질문 3개 → 양방향 답변 → 결과 비교
   ↓
자유 대화 진행
   ↓
[Phase 2] 채팅 내 게임 (수동 + 넛지)
   - 입력창 게임 버튼으로 언제든 시작 가능
   - 대화 정체 시 시스템 넛지 메시지
   - 밸런스 게임 / 양방향 퀴즈 / 일일 미션
   ↓
게임 3회 이상 완료
   ↓
[Phase 3] 만남 유도 넛지
   - "함께해보기 챌린지" 제안
   - 만남 제안 버튼 노출
   ↓
오프라인 만남
```

### 3.2 Phase 1: 아이스브레이커 (매칭 직후)

**트리거**: 매칭 성사 후 채팅방 첫 진입 (`chatList.length === 0`)

**현재 UI 위치**: `ChatScreen`에서 `NewMatchBanner` + `ChatGuideBanner`가 표시되는 영역

```
┌──────────────────────────────┐
│        ChatRoomHeader        │
├──────────────────────────────┤
│      2026년 2월 14일          │
│                              │
│   💌 축하해요! OO님과 매칭!   │  ← NewMatchBanner (기존)
│                              │
│  ┌─────────────────────────┐ │
│  │  🎮 서로 알아보기 게임    │ │  ← NEW: IcebreakerCard
│  │                         │ │
│  │  3개 질문에 답하고       │ │
│  │  서로의 답을 확인해요!   │ │
│  │                         │ │
│  │     [ 시작하기 ]         │ │
│  └─────────────────────────┘ │
│                              │
│        (채팅 메시지들)        │
│                              │
├──────────────────────────────┤
│ [+] [💡] [    입력창    ]    │
└──────────────────────────────┘
```

**게임 플로우**:

```
1. [시작하기] 탭
   ↓
2. 바텀시트 or 풀스크린으로 질문 표시
   ┌─────────────────────────┐
   │  Q1. 이상적인 주말은?    │
   │                         │
   │  ○ 카페에서 여유롭게     │
   │  ○ 야외 활동/운동        │
   │  ○ 집에서 넷플릭스       │
   │  ○ 친구들과 모임         │
   └─────────────────────────┘
   ↓
3. 내가 3문제 모두 답변 완료
   ↓
4. 채팅방에 시스템 메시지 표시:
   "🎮 [나]님이 알아보기 게임에 답변했어요!"
   ↓
5. 상대방도 같은 3문제에 답변
   ↓
6. 양쪽 모두 완료 → 결과 카드 표시:
   ┌─────────────────────────┐
   │  🎯 결과: 2/3 일치!      │
   │                         │
   │  Q1. 이상적인 주말       │
   │  나: 카페 ❤️ OO: 카페    │  ← 일치
   │                         │
   │  Q2. 여행 스타일         │
   │  나: 계획형 💔 OO: 즉흥  │  ← 불일치
   │                         │
   │  Q3. 고양이 vs 강아지    │
   │  나: 고양이 ❤️ OO: 고양이│  ← 일치
   │                         │
   │  "비슷한 부분이 많네요!" │
   │  이 결과로 대화 시작해요  │
   └─────────────────────────┘
   ↓
7. 결과가 채팅방에 공유 카드로 표시
   → 자연스럽게 "너도 고양이 좋아해? 나는~" 대화 시작
```

**질문 풀 (초기 20개, 카테고리별)**:

| 카테고리 | 질문 예시 | 답변 옵션 |
|---------|----------|----------|
| 라이프스타일 | 이상적인 주말은? | 카페/야외/집/모임 |
| 라이프스타일 | 아침형 vs 저녁형? | 아침형/저녁형/그때그때 |
| 여행 | 여행 스타일은? | 계획형/즉흥형/반반 |
| 음식 | 매운 음식은? | 못 먹어/좋아해/잘 먹지만 안 찾아 |
| 취미 | 최근 빠진 취미는? | 운동/영화드라마/독서/게임/요리 |
| 관계 | 연락 스타일은? | 수시로/하루 2-3번/각자 시간 존중 |
| 가치관 | 데이트에서 중요한 건? | 대화/분위기/음식/활동 |

**규칙**:
- 매칭당 1회만 자동 제안 (스킵 가능)
- 3문제 랜덤 추출 (중복 방지)
- 24시간 내 양쪽 미완료 시 만료 → "다음에 해볼래요?" 넛지 1회
- 스킵해도 자유 대화 가능 (강제 아님)

---

### 3.3 Phase 2: 채팅 내 게임 (대화 중)

**진입점 2가지**:

#### A. 수동 트리거 (게임 버튼)

**현재 입력창 레이아웃**:
```
[+사진] [💡AI팁] [         입력창         ]
```

**변경 후**:
```
[+사진] [💡AI팁] [🎮게임] [      입력창      ]
```

게임 버튼 탭 시 바텀시트:

```
┌──────────────────────────────┐
│  ━━━  (핸들)                  │
│                              │
│  🎮 오늘의 게임               │
│                              │
│  ┌────────────────────────┐  │
│  │ ⚖️ 밸런스 게임          │  │
│  │ 둘 중 하나만 선택!       │  │
│  │ 약 1분                  │  │
│  └────────────────────────┘  │
│                              │
│  ┌────────────────────────┐  │
│  │ 🤔 취향 퀴즈            │  │
│  │ 상대방 답을 맞춰보세요   │  │
│  │ 약 2분                  │  │
│  └────────────────────────┘  │
│                              │
│  ┌────────────────────────┐  │
│  │ 📸 오늘의 미션          │  │
│  │ 함께 사진/활동 공유      │  │
│  │ 하루 종일               │  │
│  └────────────────────────┘  │
│                              │
│  오늘 남은 게임: 2/3         │
└──────────────────────────────┘
```

#### B. 자동 넛지 (대화 정체 시)

**트리거 조건** (기존 `ChatActivityTracker` 활용):
- 마지막 양방향 메시지 이후 **12시간 경과**
- 또는 채팅방 생성 후 **24시간 경과 + 메시지 5개 미만**
- 하루 최대 1회 넛지

**시스템 메시지 형태**:
```
┌──────────────────────────────┐
│  ─── 시스템 ───              │
│                              │
│  💡 대화가 조금 뜸해졌네요    │
│  게임 한판 어때요?            │
│                              │
│  [⚖️ 밸런스 게임] [🤔 퀴즈]  │
└──────────────────────────────┘
```

---

### 3.4 게임 유형 상세

#### 게임 1: 밸런스 게임 (Balance Game)

한국 MZ세대에게 가장 친숙한 포맷. 빠르고 재미있음.

**메커니즘**:
1. 5개 질문을 양쪽에 동시 제공
2. 각자 A/B 중 하나를 선택 (3초 타이머)
3. 선택 즉시 상대 선택과 비교 표시
4. 5문제 후 일치율 요약

**UI 플로우**:
```
┌──────────────────────────────┐
│  ⚖️ 밸런스 게임  Q3/5        │
│                              │
│  ┌──────────┐ vs ┌─────────┐ │
│  │          │    │         │ │
│  │ 짜장면 🍜 │    │ 짬뽕 🌶️ │ │
│  │          │    │         │ │
│  └──────────┘    └─────────┘ │
│                              │
│         ⏱️ 0:03              │
└──────────────────────────────┘
        ↓ (선택 후)
┌──────────────────────────────┐
│  ⚖️ 밸런스 게임  Q3/5        │
│                              │
│  ┌──────────┐    ┌─────────┐ │
│  │ 짜장면 🍜 │    │ 짬뽕 🌶️ │ │
│  │  나 ✓     │    │ OO ✓    │ │
│  └──────────┘    └─────────┘ │
│                              │
│        💔 다르네요!           │
│                              │
│       [ 다음 질문 → ]        │
└──────────────────────────────┘
```

**결과 화면**:
```
┌──────────────────────────────┐
│  ⚖️ 결과: 3/5 일치! 60%      │
│                              │
│  ❤️ 일치                      │
│  • 짜장면 vs 짬뽕 → 둘 다 짬뽕│
│  • 바다 vs 산 → 둘 다 바다    │
│  • 고양이 vs 강아지 → 고양이   │
│                              │
│  💔 불일치                    │
│  • 아침형 vs 저녁형           │
│  • 계획 vs 즉흥               │
│                              │
│  "60% 일치! 비슷한 취향이네요" │
│                              │
│  [ 결과 채팅에 공유 ]         │
└──────────────────────────────┘
```

**밸런스 게임 질문 풀 (초기 50개)**:

| 난이도 | 예시 |
|--------|------|
| 순한맛 | 짜장면 vs 짬뽕 / 바다 vs 산 / 여름 vs 겨울 |
| 중간맛 | 계획 여행 vs 즉흥 여행 / 집 데이트 vs 밖 데이트 |
| 매운맛 | 연인 핸드폰 비번 공유 vs 비공유 / 매일 연락 vs 각자 시간 |

- 난이도는 관계 진행도에 따라 점진적으로 올림
- 대화 1-3일: 순한맛 위주
- 대화 4-7일: 중간맛 혼합
- 대화 7일+: 매운맛 포함

---

#### 게임 2: 양방향 퀴즈 (Guess Match)

Happy Couple 앱의 핵심 메커니즘. 서로를 알아가는 깊이 있는 포맷.

**메커니즘**:
1. 질문 1개 제시 (예: "주말에 가장 하고 싶은 건?")
2. **나의 답변 입력** (4지선다 or 텍스트)
3. **상대 답변 추측** ("OO님은 뭘 골랐을까요?")
4. 상대도 동일 과정 수행
5. 양쪽 완료 후 결과 공개

**UI 플로우**:
```
[Step 1: 내 답변]
┌──────────────────────────────┐
│  🤔 취향 퀴즈                 │
│                              │
│  "스트레스 받으면             │
│   가장 먼저 하는 건?"         │
│                              │
│  ○ 맛있는 거 먹기            │
│  ○ 운동/산책                 │
│  ○ 잠자기                    │
│  ○ 친구한테 전화             │
│                              │
│  [ 다음: OO님 답 추측하기 ]   │
└──────────────────────────────┘

[Step 2: 상대 답변 추측]
┌──────────────────────────────┐
│  🤔 OO님은 뭘 골랐을까요?    │
│                              │
│  "스트레스 받으면             │
│   가장 먼저 하는 건?"         │
│                              │
│  ○ 맛있는 거 먹기            │
│  ○ 운동/산책                 │
│  ○ 잠자기                    │
│  ○ 친구한테 전화             │
│                              │
│  [ 제출하기 ]                 │
└──────────────────────────────┘

[Step 3: 대기]
┌──────────────────────────────┐
│  ✅ 답변 완료!                │
│                              │
│  OO님이 답변하면              │
│  결과를 확인할 수 있어요       │
│                              │
│  (OO님에게 알림을 보냈어요)    │
└──────────────────────────────┘

[Step 4: 결과 공개]
┌──────────────────────────────┐
│  🎯 결과 공개!                │
│                              │
│  "스트레스 받으면 하는 건?"    │
│                              │
│  나의 답: 맛있는 거 먹기      │
│  나의 추측: 운동/산책 ❌       │
│                              │
│  OO의 답: 잠자기              │
│  OO의 추측: 맛있는 거 먹기 ✅  │
│                              │
│  "OO님이 나를 더 잘 아네요!" │
│                              │
│  [ 결과 채팅에 공유 ]         │
└──────────────────────────────┘
```

---

#### 게임 3: 오늘의 미션 (Daily Mission)

실생활에서 함께할 수 있는 가벼운 활동. 공유 경험 생성.

**메커니즘**:
1. 매일 1개 미션 제안 (채팅 내 알림 or 푸시)
2. 각자 미션 수행 → 결과를 채팅방에 공유
3. 양쪽 완료 시 스트릭 +1, 구슬 보상

**미션 풀 (초기 30개)**:

| 카테고리 | 미션 | 결과물 |
|---------|------|--------|
| 사진 | 오늘의 하늘 사진 공유하기 | 사진 |
| 사진 | 지금 먹고 있는 거 | 사진 |
| 사진 | 오늘의 OOTD | 사진 |
| 음악 | 요즘 자주 듣는 노래 1곡 공유 | 텍스트/링크 |
| 음악 | 상대방 위한 노래 추천 1곡 | 텍스트/링크 |
| 질문 | 오늘 가장 기분 좋았던 순간은? | 텍스트 |
| 질문 | 버킷리스트 Top 3 공유하기 | 텍스트 |
| 추천 | 최근 본 영화/드라마 추천 | 텍스트 |
| 추천 | 좋아하는 카페/맛집 추천 | 텍스트 |
| 활동 | 같은 시간에 산책하고 사진 교환 | 사진 |

**미션 카드 UI (채팅방 내)**:
```
┌──────────────────────────────┐
│  📸 오늘의 미션               │
│                              │
│  "오늘의 하늘 사진 공유하기"   │
│                              │
│  나: ✅ 완료                  │
│  OO님: ⏳ 대기중              │
│                              │
│  ⏰ 오늘 23:59까지            │
│                              │
│  [ 사진 보내기 ]              │
└──────────────────────────────┘
```

---

### 3.5 Phase 3: 만남 유도 넛지

**트리거**: 게임 **3회 이상 완료** (아이스브레이커 포함)

```
┌──────────────────────────────┐
│  ─── 시스템 ───              │
│                              │
│  🎉 3회 연속 미션 완료!       │
│  OO님과 벌써 많이 친해졌네요  │
│                              │
│  이제 직접 만나볼까요?        │
│                              │
│  [ 만남 제안하기 ☕ ]         │
│  [ 다음에 할게요 ]           │
└──────────────────────────────┘
```

[만남 제안하기] 탭 시:
```
┌──────────────────────────────┐
│  ☕ 만남 제안                  │
│                              │
│  함께하고 싶은 활동을 골라요   │
│                              │
│  ○ ☕ 카페에서 만나기          │
│  ○ 🍽️ 맛집 탐방              │
│  ○ 🚶 산책                   │
│  ○ ✏️ 직접 입력               │
│                              │
│  [ 제안 보내기 ]              │
└──────────────────────────────┘
```

---

## 4. 보상 체계

### 4.1 게임 보상

| 활동 | 구슬 보상 | 비고 |
|------|----------|------|
| 아이스브레이커 완료 | +5 | 양쪽 모두 답변 시 |
| 밸런스 게임 완료 | +3 | 1일 1회 제한 |
| 양방향 퀴즈 완료 | +3 | 1일 1회 제한 |
| 일일 미션 완료 | +5 | 양쪽 모두 완료 시 |
| 3일 연속 게임 스트릭 | +10 보너스 | 주 1회 |
| 7일 연속 게임 스트릭 | +30 보너스 | 월 1회 |

### 4.2 스트릭 시스템

기존 모먼트 `streak-calculator` 서비스를 확장하여 활용.

```
스트릭 카운터: 🔥 3일째 연속 게임 중!
  Day 1: ⚖️ 밸런스 게임 ✅
  Day 2: 🤔 취향 퀴즈 ✅
  Day 3: 📸 하늘 사진 미션 ✅
  → 보너스 +10 구슬!
```

### 4.3 일일 제한

- 게임 시작: 하루 3회까지 (남용 방지)
- 넛지 메시지: 하루 1회 (피로감 방지)
- 같은 상대와 같은 게임 유형: 1일 1회

---

## 5. 채팅 메시지 타입 확장

### 5.1 새로운 messageType 정의

현재 `Chat.messageType`이 string으로 되어있으므로 다음을 추가:

| messageType | 설명 | 발신자 |
|------------|------|--------|
| `game_invite` | 게임 초대 카드 | system |
| `game_answer` | 게임 답변 완료 알림 | system |
| `game_result` | 게임 결과 카드 | system |
| `game_nudge` | 게임 넛지 메시지 | system |
| `mission_start` | 일일 미션 시작 | system |
| `mission_complete` | 미션 완료 | system |
| `meet_suggest` | 만남 제안 카드 | user |

### 5.2 게임 메시지 렌더링

`chat-message.tsx`에서 messageType별 분기 처리:

```
기존: text, image, system
추가: game_invite → GameInviteCard
      game_result → GameResultCard
      game_nudge → GameNudgeCard
      mission_start → MissionCard
      meet_suggest → MeetSuggestCard
```

---

## 6. 기술 아키텍처

### 6.1 FSD 구조

```
src/features/duo-game/
├── apis/
│   ├── index.ts              # API 함수 (게임 생성, 답변 제출, 결과 조회)
│   └── types.ts              # API 요청/응답 타입
├── hooks/
│   ├── use-game-session.ts   # 게임 세션 관리
│   ├── use-game-nudge.ts     # 넛지 로직 (ChatActivityTracker 연동)
│   └── use-game-streak.ts    # 스트릭 계산 (streak-calculator 확장)
├── queries/
│   ├── use-game-list.ts      # 채팅방별 게임 목록
│   ├── use-game-result.ts    # 게임 결과 조회
│   └── use-game-questions.ts # 질문 풀 조회
├── store/
│   └── game-store.ts         # 진행 중 게임 상태 (Zustand)
├── ui/
│   ├── icebreaker-card.tsx           # Phase 1 아이스브레이커 카드
│   ├── game-bottom-sheet.tsx         # 게임 선택 바텀시트
│   ├── balance-game/
│   │   ├── balance-game-screen.tsx   # 밸런스 게임 전체 화면
│   │   ├── balance-question.tsx      # 개별 질문 UI
│   │   └── balance-result.tsx        # 결과 화면
│   ├── guess-match/
│   │   ├── guess-match-screen.tsx    # 양방향 퀴즈 전체 화면
│   │   ├── my-answer-step.tsx        # 내 답변 단계
│   │   ├── guess-step.tsx            # 상대 답변 추측 단계
│   │   └── guess-result.tsx          # 결과 화면
│   ├── daily-mission/
│   │   ├── mission-card.tsx          # 미션 카드 (채팅 내 표시)
│   │   └── mission-complete.tsx      # 미션 완료 화면
│   ├── messages/
│   │   ├── game-invite-message.tsx   # 게임 초대 채팅 메시지
│   │   ├── game-result-message.tsx   # 결과 채팅 메시지
│   │   └── game-nudge-message.tsx    # 넛지 채팅 메시지
│   └── meet-suggest-card.tsx         # 만남 제안 카드
├── constants/
│   ├── questions.ts          # 질문 풀 상수 (MVP: 하드코딩)
│   └── game-config.ts        # 게임 설정 (일일 제한, 보상 등)
└── types.ts                  # 도메인 타입
```

### 6.2 Backend API 설계 (필요 엔드포인트)

```
# 게임 세션
POST   /api/v1/games                    # 게임 생성 (chatRoomId, gameType)
GET    /api/v1/games/:gameId            # 게임 상태 조회
POST   /api/v1/games/:gameId/answer     # 답변 제출
GET    /api/v1/games/:gameId/result     # 결과 조회 (양쪽 완료 시)

# 질문
GET    /api/v1/games/questions          # 질문 풀 조회 (gameType, difficulty)

# 미션
GET    /api/v1/games/mission/daily      # 오늘의 미션 조회
POST   /api/v1/games/mission/:id/complete  # 미션 완료

# 스트릭
GET    /api/v1/games/streak/:chatRoomId # 스트릭 조회

# 만남 제안
POST   /api/v1/meet-suggest             # 만남 제안 생성
```

### 6.3 데이터 모델

```typescript
// Game Session
interface GameSession {
  id: string;
  chatRoomId: string;
  gameType: 'icebreaker' | 'balance' | 'guess_match' | 'daily_mission';
  status: 'waiting' | 'in_progress' | 'completed' | 'expired';
  createdBy: string;
  questions: GameQuestion[];
  answers: GameAnswer[];
  result?: GameResult;
  createdAt: string;
  expiresAt: string;
}

// Game Question
interface GameQuestion {
  id: string;
  text: string;
  category: string;
  difficulty: 'easy' | 'medium' | 'hard';
  options: { id: string; text: string }[];
}

// Game Answer
interface GameAnswer {
  userId: string;
  questionId: string;
  selectedOptionId: string;
  guessedOptionId?: string;  // guess_match 전용
  answeredAt: string;
}

// Game Result
interface GameResult {
  matchRate: number;        // 일치율 (0-100)
  matchedQuestions: string[];
  mismatchedQuestions: string[];
  streakCount: number;
  rewardMarbles: number;
}
```

### 6.4 기존 시스템 연동

| 기존 시스템 | 연동 방식 |
|------------|----------|
| `ChatActivityTracker` | 게임 넛지 트리거 조건으로 활용 (12h 정체 감지) |
| `ChatTipsModal` | UI 패턴 참고 (바텀시트, 로딩, 리프레시) |
| `chat-event-bus` | 게임 이벤트 전파 (`GAME_STARTED`, `GAME_COMPLETED`) |
| `streak-calculator` | 게임 스트릭 계산 로직 확장 |
| `reward/` (모먼트) | 구슬 보상 지급 API 재활용 |
| `push-notification` | 상대 답변 완료 알림, 미션 알림 |
| Socket | 실시간 게임 진행 상태 동기화 |

---

## 7. 구현 로드맵

### Phase 1: MVP (2주)

**목표**: 아이스브레이커 + 밸런스 게임 기본 동작

| 주차 | 작업 | 담당 |
|------|------|------|
| Week 1 | 질문 풀 하드코딩 (20 + 50개), 게임 API 설계 | BE + FE |
| Week 1 | `IcebreakerCard` UI, `BalanceGameScreen` UI | FE |
| Week 1 | 게임 세션 CRUD API, 답변 저장 | BE |
| Week 2 | 채팅 메시지 타입 확장 (`game_invite`, `game_result`) | BE + FE |
| Week 2 | 결과 카드, 채팅 내 게임 버튼 추가 | FE |
| Week 2 | 기본 보상 (구슬 지급) 연동 | BE |

**MVP 범위**:
- [x] 아이스브레이커: 매칭 후 3문제 양방향 퀴즈
- [x] 밸런스 게임: 5문제 A/B 선택
- [x] 결과 카드 채팅 공유
- [x] 구슬 보상
- [ ] ~~스트릭~~ (Phase 2)
- [ ] ~~양방향 퀴즈~~ (Phase 2)
- [ ] ~~일일 미션~~ (Phase 2)
- [ ] ~~자동 넛지~~ (Phase 2)

### Phase 2: 게임 확장 (Week 3-4)

| 작업 | 내용 |
|------|------|
| 양방향 퀴즈 | 내 답변 + 상대 추측 메커니즘 |
| 일일 미션 | 미션 카드 + 사진/텍스트 공유 |
| 자동 넛지 | ChatActivityTracker 연동, 12시간 정체 감지 |
| 스트릭 시스템 | streak-calculator 확장, 보너스 보상 |
| 난이도 조절 | 관계 진행도에 따른 질문 난이도 자동 조절 |

### Phase 3: 만남 유도 + 최적화 (Week 5-6)

| 작업 | 내용 |
|------|------|
| 만남 제안 카드 | 3회 완료 시 자동 제안, 만남 제안 UI |
| 질문 풀 확장 | 카테고리별 100+ 질문 (서버 관리) |
| A/B 테스트 | 게임 있음 vs 없음 그룹 비교 |
| 분석 대시보드 | 게임별 참여율, 완료율, 대화 전환율 |
| 성능 최적화 | 게임 로딩 속도, 소켓 안정성 |

---

## 8. Mixpanel 이벤트

### 핵심 이벤트

| 이벤트명 | 트리거 | 속성 |
|---------|--------|------|
| `Game_Viewed` | 게임 카드/바텀시트 노출 | gameType, source (auto/manual) |
| `Game_Started` | 게임 시작 버튼 탭 | gameType, chatRoomId |
| `Game_Answer_Submitted` | 답변 제출 | gameType, questionId, timeToAnswer |
| `Game_Completed` | 양쪽 모두 완료 | gameType, matchRate, streakCount |
| `Game_Result_Shared` | 결과 채팅에 공유 | gameType, matchRate |
| `Game_Skipped` | 게임 스킵 | gameType, source |
| `Game_Nudge_Shown` | 넛지 메시지 표시 | chatRoomId, hoursSinceLastMessage |
| `Game_Nudge_Clicked` | 넛지에서 게임 시작 | gameType |
| `Meet_Suggest_Shown` | 만남 제안 카드 노출 | gamesCompleted |
| `Meet_Suggest_Sent` | 만남 제안 전송 | activityType |
| `Meet_Suggest_Accepted` | 만남 제안 수락 | - |

### 퍼널 분석

```
Game_Viewed → Game_Started → Game_Answer_Submitted → Game_Completed → Game_Result_Shared
                                                                          ↓
                                                               (3회 완료 후)
                                                          Meet_Suggest_Shown → Meet_Suggest_Sent → Accepted
```

---

## 9. 리스크 & 대응

| 리스크 | 확률 | 영향 | 대응 |
|--------|------|------|------|
| 게임이 대화 흐름을 방해 | 중 | 중 | 스킵 항상 가능, 넛지 1일 1회 제한 |
| 한쪽만 게임하고 상대가 안 함 | 높 | 중 | 24시간 만료, 부드러운 알림 1회 |
| 질문이 식상해짐 | 중 | 낮 | 질문 풀 100개+, Phase 2에서 AI 생성 |
| 게임 결과로 싸움 | 낮 | 중 | 결과를 긍정적 프레이밍 ("다른 점도 매력!") |
| 만남 제안이 부담스러움 | 중 | 높 | "다음에 할게요" 옵션, 재표시 안 함 |

---

## 10. 비기능 요구사항

- **응답 시간**: 게임 시작 < 500ms, 결과 조회 < 1s
- **동시성**: 같은 게임에 동시 답변 시 충돌 방지 (optimistic lock)
- **오프라인**: 답변은 로컬 저장 후 재전송 (기존 optimistic message 패턴 활용)
- **i18n**: 질문 풀 한국어/일본어/영어 지원 (기존 i18n 시스템 활용)
- **접근성**: 게임 UI에 스크린리더 지원 (`accessibilityLabel`)

---

## 11. 성공 기준

### MVP 출시 후 2주 내 달성해야 할 기준

| 기준 | 임계값 | 판단 |
|------|--------|------|
| 아이스브레이커 참여율 | > 40% | 진행 |
| 밸런스 게임 완료율 | > 70% | 진행 |
| 게임 후 대화 전환율 | > 50% | 진행 |
| 게임 있는 채팅방 48h 리텐션 | > 게임 없는 채팅방 대비 +10%p | 진행 |

**실패 시**: 게임 포맷 변경 or 트리거 타이밍 조정 후 재실험

---

## 부록: 경쟁사 레퍼런스

| 서비스 | 게임 유형 | 핵심 차이점 |
|--------|----------|------------|
| Bumble | Question Game (아이스브레이킹) | 프로필 기반, 매칭 전 |
| Hinge | Prompts (대화 시작점) | 게임 아닌 자기 소개 |
| Tinder | Swipe Night (인터랙티브 스토리) | 이벤트성, 대규모 제작 |
| Happy Couple | 양방향 퀴즈 + 추측 | 커플 전용, 데이팅 앱 아님 |
| WNRS | 3단계 질문 카드 | 물리 카드, 디지털 비공식 |

**썸타임 차별화 포인트**:
- 매칭 후 **채팅방 안**에서 게임 진행 (별도 앱/화면 이동 불필요)
- **관계 진행도에 따른 점진적 깊이** (순한맛 → 매운맛)
- **오프라인 전환 넛지**와 직접 연결 (게임이 목적이 아니라 만남의 수단)
- 기존 **모먼트 스트릭/구슬 경제**와 통합

---

**End of PRD**
