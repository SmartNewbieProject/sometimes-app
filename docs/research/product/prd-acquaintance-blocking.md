---
linear_id: "36d2d353-515f-4c57-adba-8b527d71fe88"
title: "썸타임 지인 차단 기능 PRD"
url: "https://linear.app/smartnewbie/document/썸타임-지인-차단-기능-prd-3e2fe320fb18"
creator_email: "smartnewb2@gmail.com"
created_at: "2025-12-24T02:12:49.440Z"
updated_at: "2025-12-24T03:07:56.328Z"
---
@deveungi 검토후 아이디어 실현 파이프라인에서 UX/UI 디자인으로 넘겨주세요.

@이지효 
@yewon 

## 1\. 개요

### 1.1 문서 정보

| 항목 | 내용 |
| -- | -- |
| 기능명 | 지인 차단 (익명 보호 시스템) |
| 버전 | v1.0 |
| 작성일 | 2024.12.24 |
| 담당자 | 스마트 뉴비 |

### 1.2 배경 및 목적

**문제 정의**

대학생 타겟 소개팅 앱에서 여성 사용자의 가장 큰 이탈 요인은 "지인 노출에 대한 불안"입니다.

* 같은 학교 선후배/동기에게 프로필이 노출될 수 있다는 두려움
* 전 연인, 지인에게 소개팅 앱 사용 사실이 알려질 수 있다는 우려
* 소규모 지역(대전) + 대학생 한정 → 지인 만남 확률이 일반 앱 대비 높음

**유저 설문 인사이트**

> "에타에서 썸타임 광고 봤는데, 우리 학교 애들 다 있을 것 같아서 무서워요" "전 남친이랑 같은 학교인데 마주치면 어떡해요"

**목표**

* 여성 리텐션 20% 향상
* 가입 전환율 15% 향상
* "안전한 앱"이라는 브랜드 인식 강화

---

## 2\. 기능 요구사항

### 2.1 핵심 기능: 연락처 기반 지인 차단

**기능 설명**

사용자의 휴대폰 연락처에 저장된 번호와 일치하는 회원에게 내 프로필이 노출되지 않도록 차단합니다.

**동작 방식**

```
1. 사용자가 [지인 차단] 기능 활성화
2. 연락처 접근 권한 요청
3. 연락처 전화번호 해시화(SHA-256) 후 서버 전송
4. 서버에서 해시값 비교하여 일치하는 회원 식별
5. 상호 프로필 노출 차단
```

**상세 요구사항**

| 항목 | 요구사항 |
| -- | -- |
| 차단 방식 | 양방향 차단 (나도 안 보이고, 상대도 나를 못 봄) |
| 데이터 처리 | 전화번호 원본 저장 금지, 해시값만 저장 |
| 업데이트 주기 | 앱 실행 시 자동 동기화 / 수동 동기화 버튼 제공 |
| 차단 해제 | 개별 해제 불가 (전체 기능 ON/OFF만 가능) |

---

## 3\. 사용자 플로우

### 3.1 최초 설정 플로우

```
[회원가입 완료]
    ↓
[지인 차단 설정 안내 팝업]
"같은 학교 친구나 지인에게 프로필이 보이는 게 걱정되시나요?
연락처 연동으로 지인을 자동 차단할 수 있어요."
    ↓
[연락처 접근 허용] ← 선택사항
    ↓
✅ 허용: 연락처 동기화 → 차단 완료 토스트 -> 몇개의 연락처가 차단되었습니다. 모달
❌ 거부: 설정에서 언제든 활성화 가능 안내
    ↓
[학과 차단 옵션 안내] << 이거는 우리 이것도 있어 한 번 알려주는 느낌? 안넣어도 상관은 없음
"같은 학과 학생도 차단할까요?"
○ 네, 차단할게요
● 아니요, 괜찮아요 (기본)
    ↓
[홈 화면 진입]
```

### 3.2 설정 변경 플로우

```
[마이페이지]
    ↓
[설정]
    ↓
[개인정보 및 보안]
    ↓
[지인 차단 설정]
├── 연락처 차단 [ON/OFF 토글]
├── 같은 학과 차단 [ON/OFF 토글]
├── 같은 학교 차단 [ON/OFF 토글]
└── 마지막 동기화: 2024.12.24 15:30
```

---

## 4\. UI/UX 설계

### 4.1 온보딩 팝업

**디자인 가이드**

* 일러스트: 방패 + 하트 아이콘
* 톤: 안심시키는 따뜻한 톤
* CTA: "지인 차단하기" (Primary) / "나중에 설정" (Secondary)

**카피**

```
🛡️ 지인에게 들키지 않고 설레고 싶다면?

연락처에 저장된 번호와 매칭되는 사람은
자동으로 서로 안 보여요.

• 전 남자친구? 걱정 마세요
• 동기나 선배? 마주칠 일 없어요
• 우리 학과는 아예 차단도 가능해요

[지인 차단하기]  [나중에 설정]
```

### 4.2 설정 화면

```
┌─────────────────────────────────┐
│ ←  지인 차단 설정                │
├─────────────────────────────────┤
│                                 │
│ 🛡️ 연락처 기반 차단              │
│ 내 연락처에 저장된 사람과 서로    │
│ 프로필이 보이지 않아요           │
│                          [ON]   │
│                                 │
├─────────────────────────────────┤
│                                 │
│ 🎓 같은 학과 차단                │
│ 같은 학과 학생에게 내 프로필이    │
│ 보이지 않아요                    │
│                          [OFF]  │
│                                 │
├─────────────────────────────────┤
│                                 │
│ 🏫 같은 학교 차단                │
│ 같은 학교 학생에게 내 프로필이    │
│ 보이지 않아요                    │
│ ⚠️ 매칭 가능 인원이 크게 줄어요   │
│                          [OFF]  │
│                                 │
├─────────────────────────────────┤
│                                 │
│ 📋 차단 목록 관리            →  │
│                                 │
│ 🔄 연락처 수동 동기화            │
│ 마지막 동기화: 방금 전           │
│                                 │
└─────────────────────────────────┘
```

 

---

## 5\. 기술 명세

### 5.1 데이터 모델

```
// 차단 설정 테이블
interface UserBlockSettings {
  userId: string;
  contactBlockEnabled: boolean;      // 연락처 차단 활성화
  sameDepartmentBlock: boolean;      // 같은 학과 차단
  sameUniversityBlock: boolean;      // 같은 학교 차단
  lastContactSync: Date;             // 마지막 연락처 동기화
  createdAt: Date;
  updatedAt: Date;
}

// 연락처 해시 테이블
interface ContactHash {
  userId: string;
  phoneHash: string;                 // SHA-256 해시값
  createdAt: Date;
}

// 수동 차단 테이블
interface ManualBlock {
  blockerId: string;                 // 차단한 사용자
  blockedId: string;                 // 차단당한 사용자
  reason?: string;                   // 차단 사유 (선택)
  createdAt: Date;
}
```

### 5.2 API 명세

**연락처 동기화**

```
POST /api/v1/block/contacts/sync
Authorization: Bearer {token}
Content-Type: application/json

Request:
{
  "contactHashes": ["hash1", "hash2", ...]  // 클라이언트에서 해시화
}

Response:
{
  "success": true,
  "blockedCount": 15,
  "syncedAt": "2024-12-24T15:30:00Z"
}
```

**차단 설정 변경**

```
PATCH /api/v1/block/settings
Authorization: Bearer {token}
Content-Type: application/json

Request:
{
  "contactBlockEnabled": true,
  "sameDepartmentBlock": false,
  "sameUniversityBlock": false
}

Response:
{
  "success": true,
  "settings": { ... }
}
```

### 5.3 매칭 쿼리 수정

```
-- 기존 매칭 쿼리에 차단 조건 추가
SELECT * FROM users u
WHERE u.id != :currentUserId
  AND u.status = 'active'
  AND u.cluster_id = :clusterId
  -- 연락처 차단
  AND NOT EXISTS (
    SELECT 1 FROM contact_hashes ch1
    JOIN contact_hashes ch2 ON ch1.phone_hash = ch2.phone_hash
    WHERE ch1.user_id = :currentUserId AND ch2.user_id = u.id
  )
  -- 학과 차단
  AND (
    :sameDeptBlock = false 
    OR u.department_id != :currentDeptId
  )
  -- 학교 차단
  AND (
    :sameUniBlock = false 
    OR u.university_id != :currentUniId
  )
  -- 수동 차단
  AND NOT EXISTS (
    SELECT 1 FROM manual_blocks mb
    WHERE (mb.blocker_id = :currentUserId AND mb.blocked_id = u.id)
       OR (mb.blocker_id = u.id AND mb.blocked_id = :currentUserId)
  )
```

### 5.4 보안 요구사항

| 항목 | 요구사항 |
| -- | -- |
| 전화번호 처리 | 클라이언트에서 SHA-256 해시화 후 전송 |
| 원본 저장 금지 | 서버에 평문 전화번호 저장 불가 |
| 해시 솔트 | 앱별 고유 솔트 적용 |
| 전송 암호화 | HTTPS + TLS 1.3 |
| 데이터 삭제 | 회원 탈퇴 시 모든 해시 데이터 즉시 삭제 |

---

## 6\. 성공 지표 (KPI)

### 6.1 핵심 지표

| 지표 | 현재 | 목표 | 측정 방법 |
| -- | -- | -- | -- |
| 여성 D7 리텐션 | 25% | 35% | 가입 후 7일 재방문율 |
| 여성 가입 전환율 | 45% | 55% | 광고 클릭 → 가입 완료 |
| 지인 차단 활성화율 | \- | 70% | 가입자 중 기능 활성화 비율 |

### 6.2 부수 지표

| 지표 | 목표 | 측정 방법 |
| -- | -- | -- |
| NPS (여성) | 50+ | 가입 30일 후 설문 |
| "안전하다" 키워드 언급률 | 30%+ | 리뷰/설문 텍스트 분석 |
| 학과 차단 사용률 | 20% | 설정 활성화 비율 |

---

## 7\. 마케팅 연계

### 7.1 광고 카피 활용

**기존 크리스마스 캠페인에 추가**

```
"지인에게 들키지 않고 설레고 싶다면?"
연락처 연동 한 번으로 지인 자동 차단

✓ 전 남친도, 동기도 안 보여요
✓ 같은 학과 차단도 가능해요
✓ 안심하고 시작하세요

대전 대학생만의 1:1 소개팅
```

### 7.2 앱스토어 설명 추가

```
🛡️ 지인 걱정 없는 안전한 소개팅

연락처 연동으로 지인 자동 차단
같은 학과/학교 차단 옵션
안심하고 시작하세요
```

---

## 8\. 개발 일정

| 단계 | 기간 | 담당 | 산출물 |
| -- | -- | -- | -- |
| 설계 검토 | 12/26-27 | PM, Dev | 최종 명세 확정 |
| DB 설계 | 12/28-29 | Backend | 스키마, 마이그레이션 |
| API 개발 | 12/30-1/3 | Backend | API 엔드포인트 |
| 앱 UI 개발 | 1/2-1/6 | Frontend | 설정 화면, 온보딩 |
| 통합 테스트 | 1/7-1/8 | QA | 테스트 리포트 |
| 베타 배포 | 1/9 | DevOps | TestFlight/내부 테스트 |
| 정식 배포 | 1/13 | All | 스토어 업데이트 |

---

## 9\. 리스크 및 대응

| 리스크 | 영향도 | 대응 방안 |
| -- | -- | -- |
| 연락처 권한 거부율 높음 | 중 | 기능 혜택 강조, 선택적 활성화 |
| 해시 충돌로 인한 오차단 | 하 | SHA-256 + 솔트로 충돌 최소화 |
| 매칭 풀 감소로 불만 | 중 | 지역 확장 시 자동 해제 유도 |
| 경쟁사 유사 기능 출시 | 중 | 대학생 특화 옵션으로 차별화 유지 |

---

## 10\. 향후 확장 계획

**v1.1 (2월)**

* 카카오톡 친구 연동 차단
* 인스타그램 팔로워 차단

**v1.2 (3월)**

* AI 기반 지인 추정 차단 (공통 친구, 활동 패턴 분석)
* 특정 시간대 프로필 숨기기

---

추가로 수정하거나 보완이 필요한 부분이 있으면 말씀해 주세요!
